# smolagents Kullanarak Ä°lk Agent'Ä±mÄ±zÄ± OluÅŸturalÄ±m

Son bÃ¶lÃ¼mde, Python kodu kullanarak sÄ±fÄ±rdan nasÄ±l Agent oluÅŸturabileceÄŸimizi Ã¶ÄŸrendik ve **bu sÃ¼recin ne kadar zahmetli olabileceÄŸini de gÃ¶rdÃ¼k**. Neyse ki, birÃ§ok Agent kÃ¼tÃ¼phanesi bu iÅŸi **sizin iÃ§in aÄŸÄ±r iÅŸlerin Ã§oÄŸunu Ã¼stlenerek** kolaylaÅŸtÄ±rÄ±yor.

Bu derste, gÃ¶rÃ¼ntÃ¼ oluÅŸturma, web aramasÄ± yapma, saat dilimi kontrolÃ¼ gibi iÅŸlemleri yapabilen **ilk Agent'Ä±nÄ±zÄ± oluÅŸturacaksÄ±nÄ±z**!

AyrÄ±ca oluÅŸturduÄŸunuz Agent'Ä± **bir Hugging Face Space Ã¼zerinde yayÄ±nlayarak arkadaÅŸlarÄ±nÄ±zla ve iÅŸ arkadaÅŸlarÄ±nÄ±zla paylaÅŸabileceksiniz**.

Haydi baÅŸlayalÄ±m!


## smolagents Nedir?

<img src="https://huggingface.co/datasets/agents-course/course-images/resolve/main/en/unit1/smolagents.png" alt="smolagents"/>

Bu Agent'Ä± oluÅŸturmak iÃ§in, **Agent'larÄ±nÄ±zÄ± kolayca geliÅŸtirmeniz iÃ§in bir framework saÄŸlayan** `smolagents` kÃ¼tÃ¼phanesini kullanacaÄŸÄ±z.

Bu kÃ¼tÃ¼phane, sadelik iÃ§in tasarlanmÄ±ÅŸtÄ±r, ancak bir Agent oluÅŸturmanÄ±n karmaÅŸÄ±klÄ±ÄŸÄ±nÄ±n bÃ¼yÃ¼k kÄ±smÄ±nÄ± soyutlayarak sizin Agent davranÄ±ÅŸÄ±nÄ± tasarlamaya odaklanmanÄ±za olanak tanÄ±r.

smolagents hakkÄ±nda daha derine Ãœnite 2'de ineceÄŸiz. Bu sÄ±rada, bu <a href="https://huggingface.co/blog/smolagents" target="_blank">blog yazÄ±sÄ±na</a> veya kÃ¼tÃ¼phanenin <a href="https://github.com/huggingface/smolagents" target="_blank">GitHub reposuna</a> gÃ¶z atabilirsiniz.

KÄ±sacasÄ±, `smolagents`, **"Actions" (Eylemler)** gerÃ§ekleÅŸtiren ve ardÄ±ndan kodu Ã§alÄ±ÅŸtÄ±rarak **"Observes" (GÃ¶zlemler)** yapan bir tÃ¼r Agent olan **codeAgent** Ã¼zerine odaklanan bir kÃ¼tÃ¼phanedir.

Ä°ÅŸte inÅŸa edeceÄŸimiz ÅŸeyin bir Ã¶rneÄŸi!

Agent'Ä±mÄ±za bir **GÃ¶rÃ¼ntÃ¼ oluÅŸturma aracÄ±** saÄŸladÄ±k ve ondan bir kedi resmi oluÅŸturmasÄ±nÄ± istedik.

`smolagents` iÃ§indeki Agent, daha Ã¶nce sÄ±fÄ±rdan oluÅŸturduÄŸumuz Ã¶zel Agent'Ä±n **aynÄ± davranÄ±ÅŸlarÄ±na** sahip olacak: **dÃ¼ÅŸÃ¼necek, harekete geÃ§ecek ve gÃ¶zlemleyecek** â€” bu dÃ¶ngÃ¼de, nihai cevaba ulaÅŸana kadar devam edecek:

<iframe width="560" height="315" src="https://www.youtube.com/embed/PQDKcWiuln4?si=ysSTDZoi8y55FVvA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

Heyecan verici, deÄŸil mi?

## Haydi Agent'Ä±mÄ±zÄ± OluÅŸturalÄ±m!

BaÅŸlamak iÃ§in bu Space'i kopyalayÄ±n: <a href="https://huggingface.co/spaces/agents-course/First_agent_template" target="_blank">https://huggingface.co/spaces/agents-course/First_agent_template</a>  
> Bu ÅŸablon iÃ§in <a href="https://huggingface.co/m-ric" target="_blank">Aymeric</a>'e teÅŸekkÃ¼rler! ğŸ™Œ


Bu Space'i kopyalamak, **kendi profilinizde yerel bir kopya oluÅŸturmanÄ±z** anlamÄ±na gelir:  
<img src="https://huggingface.co/datasets/agents-course/course-images/resolve/main/en/unit1/duplicate-space.gif" alt="Kopyala"/>

Space'i kopyaladÄ±ktan sonra, Agent'Ä±nÄ±zÄ±n model API'sine eriÅŸebilmesi iÃ§in Hugging Face API token'Ä±nÄ±zÄ± eklemeniz gerekecek:

1. EÄŸer hala yoksa, [https://hf.co/settings/tokens](https://hf.co/settings/tokens) adresinden Ã§Ä±karÄ±m (inference) izni olan bir Hugging Face token'Ä± alÄ±n  
2. KopyaladÄ±ÄŸÄ±nÄ±z Space'e gidin ve **Settings** (ayarlar) sekmesine tÄ±klayÄ±n  
3. **Variables and Secrets** bÃ¶lÃ¼mÃ¼ne kadar kaydÄ±rÄ±n ve **New Secret** butonuna tÄ±klayÄ±n  
4. `HF_TOKEN` adÄ±nda yeni bir secret oluÅŸturun ve token'Ä±nÄ±zÄ± deÄŸer olarak yapÄ±ÅŸtÄ±rÄ±n  
5. **Save** (kaydet) butonuna tÄ±klayarak token'Ä±nÄ±zÄ± gÃ¼venli ÅŸekilde kaydedin  

Bu ders boyunca dÃ¼zenlemeniz gereken tek dosya, ÅŸu an eksik olan **"app.py"** dosyasÄ± olacak. [Åablondaki orijinal dosyayÄ± buradan](https://huggingface.co/spaces/agents-course/First_agent_template/blob/main/app.py) gÃ¶rebilirsiniz. Kendi dosyanÄ±zÄ± bulmak iÃ§in Space'inize gidin, `Files` (dosyalar) sekmesine tÄ±klayÄ±n ve dizin listesinden `app.py`'ye tÄ±klayÄ±n.

Haydi birlikte kodu inceleyelim:

- Dosya, bazÄ± basit ama gerekli kÃ¼tÃ¼phane import'larÄ±yla baÅŸlÄ±yor

```python
from smolagents import CodeAgent, DuckDuckGoSearchTool, FinalAnswerTool, HfApiModel, load_tool, tool
import datetime
import requests
import pytz
import yaml
```

Daha Ã¶nce belirttiÄŸimiz gibi, doÄŸrudan **smolagents** iÃ§indeki **CodeAgent** sÄ±nÄ±fÄ±nÄ± kullanacaÄŸÄ±z.


### Tools (AraÃ§lar)

Åimdi araÃ§lara geÃ§elim! AraÃ§lar hakkÄ±nda hatÄ±rlatma istiyorsanÄ±z, kursun [AraÃ§lar](tools) bÃ¶lÃ¼mÃ¼ne geri dÃ¶nmekten Ã§ekinmeyin.

<details>
<summary>TÃ¼rkÃ§e Ã§eviriyi gÃ¶rmek iÃ§in tÄ±klayÄ±n</summary>
```python
@tool
def my_custom_tool(arg1:str, arg2:int)-> str: # dÃ¶nÃ¼ÅŸ tÃ¼rÃ¼nÃ¼ belirtmek Ã¶nemlidir
    # AraÃ§ aÃ§Ä±klamasÄ± / argÃ¼man aÃ§Ä±klamasÄ± formatÄ±nÄ± koruyun ama aracÄ± deÄŸiÅŸtirmekte Ã¶zgÃ¼rsÃ¼nÃ¼z
    """HenÃ¼z hiÃ§bir ÅŸey yapmayan bir araÃ§ 
    Args:
        arg1: birinci argÃ¼man
        arg2: ikinci argÃ¼man
    """
    return "Ne tÃ¼r bir sihir inÅŸa edeceksin?"

@tool
def get_current_time_in_timezone(timezone: str) -> str:
    """Belirtilen bir saat dilimindeki yerel saati getiren bir araÃ§.
    Args:
        timezone: GeÃ§erli bir saat dilimini temsil eden bir string (Ã¶rneÄŸin, 'America/New_York').
    """
    try:
        # Saat dilimi nesnesi oluÅŸtur
        tz = pytz.timezone(timezone)
        # Bu saat dilimindeki geÃ§erli zamanÄ± al
        local_time = datetime.datetime.now(tz).strftime("%Y-%m-%d %H:%M:%S")
        return f"{timezone} saat dilimindeki yerel saat: {local_time}"
    except Exception as e:
        return f"'{timezone}' saat dilimi iÃ§in zaman alÄ±nÄ±rken hata oluÅŸtu: {str(e)}"
```
</details>

```python
@tool
def my_custom_tool(arg1:str, arg2:int)-> str: # dÃ¶nÃ¼ÅŸ tÃ¼rÃ¼nÃ¼ belirtmek Ã¶nemlidir
    # AraÃ§ aÃ§Ä±klamasÄ± / argÃ¼man aÃ§Ä±klamasÄ± formatÄ±nÄ± koruyun ama aracÄ± deÄŸiÅŸtirmekte Ã¶zgÃ¼rsÃ¼nÃ¼z
    """A tool that does nothing yet 
    Args:
        arg1: the first argument
        arg2: the second argument
    """
    return "What magic will you build ?"

@tool
def get_current_time_in_timezone(timezone: str) -> str:
    """A tool that fetches the current local time in a specified timezone.
    Args:
        timezone: A string representing a valid timezone (e.g., 'America/New_York').
    """
    try:
        # Saat dilimi nesnesi oluÅŸtur
        tz = pytz.timezone(timezone)
        # Bu saat dilimindeki geÃ§erli zamanÄ± al
        local_time = datetime.datetime.now(tz).strftime("%Y-%m-%d %H:%M:%S")
        return f"The current local time in {timezone} is: {local_time}"
    except Exception as e:
        return f"Error fetching time for timezone '{timezone}': {str(e)}"
```


Bu bÃ¶lÃ¼mde inÅŸa etmenizi teÅŸvik ettiÄŸimiz ÅŸey araÃ§lar!

Ä°ki Ã¶rnek veriyoruz:

1. **Ã‡alÄ±ÅŸmayan sahte bir araÃ§** â€” bunu faydalÄ± bir ÅŸeye dÃ¶nÃ¼ÅŸtÃ¼rebilirsiniz
2. DÃ¼nyadaki herhangi bir yerin geÃ§erli saatini dÃ¶ndÃ¼ren **Ã§alÄ±ÅŸan bir araÃ§**

Kendi aracÄ±nÄ±zÄ± tanÄ±mlarken ÅŸunlara dikkat etmelisiniz:

1. Fonksiyonunuz iÃ§in girdi ve Ã§Ä±ktÄ± tÃ¼rlerini belirtin, Ã¶rn. `get_current_time_in_timezone(timezone: str) -> str:`
2. **Ä°yi biÃ§imlendirilmiÅŸ bir docstring ekleyin.** `smolagents`, tÃ¼m argÃ¼manlarÄ±n **docstring iÃ§inde aÃ§Ä±klanmasÄ±nÄ±** bekler.

### Agent
Bu Agent, LLM (bÃ¼yÃ¼k dil modelleri) motoru olarak [`Qwen/Qwen2.5-Coder-32B-Instruct`](https://huggingface.co/Qwen/Qwen2.5-Coder-32B-Instruct) kullanÄ±yor. Bu, serverless API aracÄ±lÄ±ÄŸÄ±yla eriÅŸeceÄŸimiz oldukÃ§a yetenekli bir modeldir.

```python
final_answer = FinalAnswerTool()
model = HfApiModel(
    max_tokens=2096,
    temperature=0.5,
    model_id='Qwen/Qwen2.5-Coder-32B-Instruct',
    custom_role_conversions=None,
)

with open("prompts.yaml", 'r') as stream:
    prompt_templates = yaml.safe_load(stream)
    
# CodeAgent'Ä±mÄ±zÄ± oluÅŸturuyoruz
agent = CodeAgent(
    model=model,
    tools=[final_answer], # araÃ§larÄ±nÄ±zÄ± buraya ekleyin (final_answer'Ä± silmeyin)
    max_steps=6,
    verbosity_level=1,
    grammar=None,
    planning_interval=None,
    name=None,
    description=None,
    prompt_templates=prompt_templates
)

GradioUI(agent).launch()
```

Bu Agent hala, daha Ã¶nceki bÃ¶lÃ¼mde gÃ¶rdÃ¼ÄŸÃ¼mÃ¼z `InferenceClient`'Ä±, **HfApiModel** sÄ±nÄ±fÄ± Ã¼zerinden kullanÄ±yor!

Framework'Ã¼ Ãœnite 2'de daha ayrÄ±ntÄ±lÄ± Ã¶rneklerle anlatacaÄŸÄ±z. Åimdilik, odaklanmanÄ±z gereken ÅŸey `tools` parametresi ile **yeni araÃ§lar ekleyerek** Agent'Ä±nÄ±zÄ± geliÅŸtirmek.

Ã–rneÄŸin, ilk satÄ±rda import edilen `DuckDuckGoSearchTool`'u kullanabilir veya kodun ilerleyen kÄ±smÄ±nda Hub'dan yÃ¼klenen `image_generation_tool`'u inceleyebilirsiniz.

**Yeni araÃ§lar eklemek, Agent'Ä±nÄ±za yeni yetenekler kazandÄ±racaktÄ±r**, bu konuda yaratÄ±cÄ± olmaya Ã§alÄ±ÅŸÄ±n!

### Sistem Prompt'u (Ä°stemi)

Agent'Ä±n sistem Prompt'u ayrÄ± bir `prompts.yaml` dosyasÄ±nda saklanÄ±r. Bu dosya, Agent'Ä±n davranÄ±ÅŸlarÄ±nÄ± yÃ¶nlendiren Ã¶nceden tanÄ±mlanmÄ±ÅŸ talimatlarÄ± iÃ§erir.

Prompt'larÄ± bir YAML dosyasÄ±nda saklamak, farklÄ± Agent'lar veya kullanÄ±m senaryolarÄ± arasÄ±nda kolayca Ã¶zelleÅŸtirme ve yeniden kullanÄ±mÄ± saÄŸlar.

`prompts.yaml` dosyasÄ±nÄ±n nerede bulunduÄŸunu ve proje iÃ§inde nasÄ±l organize edildiÄŸini gÃ¶rmek iÃ§in [Space'in dosya yapÄ±sÄ±nÄ±](https://huggingface.co/spaces/agents-course/First_agent_template/tree/main) kontrol edebilirsiniz.

Tam "app.py" dosyasÄ±:

<details> <summary>TÃ¼rkÃ§e Ã§eviriyi gÃ¶rmek iÃ§in tÄ±klayÄ±n.</summary>
```python
from smolagents import CodeAgent, DuckDuckGoSearchTool, HfApiModel, load_tool, tool
import datetime
import requests
import pytz
import yaml
from tools.final_answer import FinalAnswerTool

from Gradio_UI import GradioUI

# AÅŸaÄŸÄ±da hiÃ§bir ÅŸey yapmayan bir araÃ§ Ã¶rneÄŸi var. Bizi yaratÄ±cÄ±lÄ±ÄŸÄ±nla ÅŸaÅŸÄ±rt!
@tool
def my_custom_tool(arg1:str, arg2:int)-> str: # dÃ¶nÃ¼ÅŸ tipi belirtmek Ã¶nemli
    # AraÃ§ aÃ§Ä±klamasÄ± / argÃ¼man aÃ§Ä±klamasÄ± formatÄ±nÄ± koruyun ama aracÄ± deÄŸiÅŸtirmekte Ã¶zgÃ¼rsÃ¼nÃ¼z
    """HenÃ¼z hiÃ§bir ÅŸey yapmayan bir araÃ§ 
    Args:
        arg1: birinci argÃ¼man
        arg2: ikinci argÃ¼man
    """
    return "Ne tÃ¼r bir sihir inÅŸa edeceksin?"

@tool
def get_current_time_in_timezone(timezone: str) -> str:
    """Belirtilen bir saat dilimindeki yerel saati getiren bir araÃ§.
    Args:
        timezone: GeÃ§erli bir saat dilimini temsil eden bir string (Ã¶rneÄŸin, 'America/New_York').
    """
    try:
        # Saat dilimi nesnesi oluÅŸtur
        tz = pytz.timezone(timezone)
        # Bu saat dilimindeki geÃ§erli zamanÄ± al
        local_time = datetime.datetime.now(tz).strftime("%Y-%m-%d %H:%M:%S")
        return f"{timezone} saat dilimindeki yerel saat: {local_time}"
    except Exception as e:
        return f"'{timezone}' saat dilimi iÃ§in zaman alÄ±nÄ±rken hata oluÅŸtu: {str(e)}"


final_answer = FinalAnswerTool()
model = HfApiModel(
    max_tokens=2096,
    temperature=0.5,
    model_id='Qwen/Qwen2.5-Coder-32B-Instruct',
    custom_role_conversions=None,
)


# Hub'dan araÃ§ import et
image_generation_tool = load_tool("agents-course/text-to-image", trust_remote_code=True)

# Sistem prompt'unu prompt.yaml dosyasÄ±ndan yÃ¼kle
with open("prompts.yaml", 'r') as stream:
    prompt_templates = yaml.safe_load(stream)
    
agent = CodeAgent(
    model=model,
    tools=[final_answer], # araÃ§larÄ±nÄ±zÄ± buraya ekleyin (final_answer'Ä± silmeyin)
    max_steps=6,
    verbosity_level=1,
    grammar=None,
    planning_interval=None,
    name=None,
    description=None,
    prompt_templates=prompt_templates # Sistem prompt'unu CodeAgent'e aktar
)


GradioUI(agent).launch()
```
</details>

```python
from smolagents import CodeAgent, DuckDuckGoSearchTool, HfApiModel, load_tool, tool
import datetime
import requests
import pytz
import yaml
from tools.final_answer import FinalAnswerTool

from Gradio_UI import GradioUI

# Below is an example of a tool that does nothing. Amaze us with your creativity!
@tool
def my_custom_tool(arg1:str, arg2:int)-> str: # it's important to specify the return type
    # Keep this format for the tool description / args description but feel free to modify the tool
    """A tool that does nothing yet 
    Args:
        arg1: the first argument
        arg2: the second argument
    """
    return "What magic will you build ?"

@tool
def get_current_time_in_timezone(timezone: str) -> str:
    """A tool that fetches the current local time in a specified timezone.
    Args:
        timezone: A string representing a valid timezone (e.g., 'America/New_York').
    """
    try:
        # Create timezone object
        tz = pytz.timezone(timezone)
        # Get current time in that timezone
        local_time = datetime.datetime.now(tz).strftime("%Y-%m-%d %H:%M:%S")
        return f"The current local time in {timezone} is: {local_time}"
    except Exception as e:
        return f"Error fetching time for timezone '{timezone}': {str(e)}"


final_answer = FinalAnswerTool()
    model = HfApiModel(
    max_tokens=2096,
    temperature=0.5,
    model_id='Qwen/Qwen2.5-Coder-32B-Instruct',
    custom_role_conversions=None,
)


# Import tool from Hub
image_generation_tool = load_tool("agents-course/text-to-image", trust_remote_code=True)

# Load system prompt from prompt.yaml file
with open("prompts.yaml", 'r') as stream:
    prompt_templates = yaml.safe_load(stream)
    
agent = CodeAgent(
    model=model,
    tools=[final_answer], # add your tools here (don't remove final_answer)
    max_steps=6,
    verbosity_level=1,
    grammar=None,
    planning_interval=None,
    name=None,
    description=None,
    prompt_templates=prompt_templates # Pass system prompt to CodeAgent
)


GradioUI(agent).launch()
```

**AmacÄ±nÄ±z**, Space'e ve Agent'e aÅŸina olmaktÄ±r.

Åu anda, ÅŸablondaki Agent **herhangi bir araÃ§ kullanmÄ±yor, bu yÃ¼zden ona bazÄ± hazÄ±r araÃ§larÄ± saÄŸlamayÄ± veya kendi araÃ§larÄ±nÄ±zÄ± yazmayÄ± deneyin!**

Discord kanalÄ±mÄ±zda **#agents-course-showcase** adlÄ± kanalda harika Agent Ã§Ä±ktÄ±larÄ±nÄ±zÄ± sabÄ±rsÄ±zlÄ±kla bekliyoruz!

Tebrikler, ilk Agent'Ä±nÄ±zÄ± oluÅŸturdunuz! Bunu arkadaÅŸlarÄ±nÄ±z ve iÅŸ arkadaÅŸlarÄ±nÄ±zla paylaÅŸmaktan Ã§ekinmeyin.

Bu ilk denemeniz olduÄŸu iÃ§in, biraz hatalÄ± ya da yavaÅŸ Ã§alÄ±ÅŸmasÄ± tamamen normaldir. Ä°lerleyen Ã¼nitelerde, daha iyi Agent'lar nasÄ±l oluÅŸturulur, bunu Ã¶ÄŸreneceÄŸiz.

Ã–ÄŸrenmenin en iyi yolu denemektir, bu yÃ¼zden Agent'Ä±nÄ±zÄ± gÃ¼ncelleyin, yeni araÃ§lar ekleyin, farklÄ± bir modelle deneyin vs.

Bir sonraki bÃ¶lÃ¼mde, son SÄ±nav'Ä± tamamlayacak ve sertifikanÄ±zÄ± alacaksÄ±nÄ±z!