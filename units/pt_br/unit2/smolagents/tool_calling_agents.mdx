<CourseFloatingBanner 
  classNames="absolute z-10 right-0 top-0"
  notebooks={[
    {label: "Google Colab", value: "https://colab.research.google.com/#fileId=https://huggingface.co/agents-course/notebooks/blob/main/unit2/smolagents/tool_calling_agents.ipynb"},
]}
askForHelpUrl="http://hf.co/join/discord" />

# Escrevendo aÃ§Ãµes como trechos de cÃ³digo ou objetos JSON

> [!TIP]
> VocÃª pode acompanhar este conteÃºdo <a href="https://huggingface.co/agents-course/notebooks/blob/main/unit2/smolagents/tool_calling_agents.ipynb" target="_blank">neste notebook</a>, executÃ¡vel no Google Colab.

Os Tool Calling Agents sÃ£o o segundo tipo de agente disponÃ­vel no `smolagents`. Diferentemente dos Code Agents (que produzem trechos de Python), eles **utilizam a capacidade de tool calling nativa dos provedores de LLM** e geram chamadas de ferramenta como **estruturas JSON**. Esse Ã© o padrÃ£o adotado por OpenAI, Anthropic e muitos outros.

Vamos comparar:

- Quando Alfred quer buscar serviÃ§os de buffet e ideias para a festa, um `CodeAgent` geraria e executaria cÃ³digo Python como:

```python
for query in [
    "Best catering services in Gotham City", 
    "Party theme ideas for superheroes"
]:
    print(web_search(f"Search for: {query}"))
```

- JÃ¡ um `ToolCallingAgent` criaria um JSON:

```python
[
    {"name": "web_search", "arguments": "Best catering services in Gotham City"},
    {"name": "web_search", "arguments": "Party theme ideas for superheroes"}
]
```

Esse blob em JSON Ã© entÃ£o usado para executar as chamadas de ferramenta.

Embora o `smolagents` foque em `CodeAgents` (pois [tendem a performar melhor](https://huggingface.co/papers/2402.01030)), os `ToolCallingAgents` sÃ£o Ãºteis em sistemas simples, nos quais nÃ£o hÃ¡ necessidade de lidar com variÃ¡veis ou chamadas mais complexas.

![Code vs JSON Actions](https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/transformers/code_vs_json_actions.png)

## Como funcionam os Tool Calling Agents?

Eles seguem o mesmo fluxo multi-etapas dos Code Agents (consulte a [seÃ§Ã£o anterior](./code_agents) para detalhes).

A diferenÃ§a crucial estÃ¡ em **como escrevem as aÃ§Ãµes**: em vez de gerar cÃ³digo executÃ¡vel, produzem **objetos JSON especificando nomes de ferramentas e argumentos**. O sistema entÃ£o **parseia** esses comandos para executar a ferramenta correta.

## Exemplo: executando um Tool Calling Agent

Vamos retomar o exemplo da preparaÃ§Ã£o da festa, agora usando um `ToolCallingAgent`. Construiremos um agente que faz buscas na web com DuckDuckGo â€” exatamente como no Code Agent, mas com outro tipo de agente. O framework cuida das demais diferenÃ§as:

```python
from smolagents import ToolCallingAgent, DuckDuckGoSearchTool, InferenceClientModel

agent = ToolCallingAgent(tools=[DuckDuckGoSearchTool()], model=InferenceClientModel())

agent.run("Search for the best music recommendations for a party at the Wayne's mansion.")
```

Ao analisar o trace, em vez de `Executing parsed code:`, vocÃª verÃ¡ algo como:

```
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Calling tool: 'web_search' with arguments: {'query': "best music recommendations for a party at Wayne's         â”‚
â”‚ mansion"}                                                                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

Ou seja, o agente gera uma chamada estruturada que o sistema interpreta e executa, diferentemente do `CodeAgent`, que executa cÃ³digo diretamente.

Agora entendemos ambos os tipos de agentes â€” e podemos escolher o mais adequado para cada cenÃ¡rio. Vamos prosseguir com o estudo do `smolagents` e deixar a festa do Alfred impecÃ¡vel! ðŸŽ‰

## Recursos

- [DocumentaÃ§Ã£o do ToolCallingAgent](https://huggingface.co/docs/smolagents/v1.8.1/en/reference/agents#smolagents.ToolCallingAgent) â€” ReferÃªncia oficial
