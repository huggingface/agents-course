BÃ¢y giá», báº¡n sáº½ xÃ¢y dá»±ng má»™t **AI Agent Ä‘á»ƒ chiáº¿n Ä‘áº¥u kiá»ƒu PokÃ©mon** báº±ng cÃ¡ch Ã¡p dá»¥ng má»i kiáº¿n thá»©c Ä‘Ã£ há»c. Há»‡ thá»‘ng gá»“m 4 thÃ nh pháº§n chÃ­nh:

- **Poke-env:** ThÆ° viá»‡n Python Ä‘á»ƒ huáº¥n luyá»‡n bot PokÃ©mon dá»±a trÃªn luáº­t hoáº·c há»c tÄƒng cÆ°á»ng
- **PokÃ©mon Showdown:** TrÃ¬nh mÃ´ phá»ng chiáº¿n Ä‘áº¥u trá»±c tuyáº¿n
- **LLMAgentBase:** Lá»›p Python káº¿t ná»‘i LLM vá»›i mÃ´i trÆ°á»ng chiáº¿n Ä‘áº¥u
- **TemplateAgent:** Máº«u agent Ä‘á»ƒ báº¡n hoÃ n thiá»‡n

## ðŸ§  Poke-env
![Battle gif](https://github.com/hsahovic/poke-env/raw/master/rl-gif.gif)

[Poke-env](https://github.com/hsahovic/poke-env) lÃ  giao diá»‡n Python do [Haris Sahovic](https://huggingface.co/hsahovic) phÃ¡t triá»ƒn, Ä‘Æ°á»£c tá»‘i Æ°u cho Agentic AI. Agent cá»§a báº¡n sáº½ káº¿ thá»«a tá»« lá»›p `Player` Ä‘á»ƒ giao tiáº¿p vá»›i giao diá»‡n trá»±c quan.

**TÃ i liá»‡u**: [poke-env.readthedocs.io](https://poke-env.readthedocs.io/en/stable/)  
**Kho mÃ£ nguá»“n**: [github.com/hsahovic/poke-env](https://github.com/hsahovic/poke-env)

## âš”ï¸ PokÃ©mon Showdown
[PokÃ©mon Showdown](https://pokemonshowdown.com/) lÃ  trÃ¬nh mÃ´ phá»ng [mÃ£ nguá»“n má»Ÿ](https://github.com/smogon/Pokemon-Showdown) nÆ¡i agent cá»§a báº¡n sáº½ chiáº¿n Ä‘áº¥u. Agent sáº½ hoáº¡t Ä‘á»™ng nhÆ° ngÆ°á»i chÆ¡i thá»±c sá»±, Ä‘Æ°a ra lá»±a chá»n theo tá»«ng lÆ°á»£t.

**Kho mÃ£ nguá»“n**: [github.com/smogon/Pokemon-Showdown](https://github.com/smogon/Pokemon-Showdown)  
**Website**: [pokemonshowdown.com](https://pokemonshowdown.com/)

## ðŸ”Œ LLMAgentBase
Lá»›p `LLMAgentBase` káº¿ thá»«a tá»« `Player` cá»§a **Poke-env**, káº¿t ná»‘i **LLM** vá»›i **trÃ¬nh mÃ´ phá»ng PokÃ©mon**. NÃ³ cung cáº¥p cÃ¡c cÃ´ng cá»¥ tÆ°Æ¡ng tÃ¡c (Ä‘á»‹nh nghÄ©a trong `STANDARD_TOOL_SCHEMA`):
- `choose_move`: Chá»n Ä‘Ã²n táº¥n cÃ´ng
- `choose_switch`: Äá»•i PokÃ©mon

### ðŸ§  Logic chÃ­nh
- `choose_move(battle: Battle)`: PhÆ°Æ¡ng thá»©c chÃ­nh Ä‘Æ°á»£c gá»i má»—i lÆ°á»£t, tráº£ vá» hÃ nh Ä‘á»™ng dáº¡ng chuá»—i

### ðŸ”§ PhÆ°Æ¡ng thá»©c ná»™i bá»™
- `_format_battle_state(battle)`: Äá»‹nh dáº¡ng tráº¡ng thÃ¡i tráº­n Ä‘áº¥u thÃ nh chuá»—i
- `_find_move_by_name(battle, move_name)`: TÃ¬m Ä‘Ã²n táº¥n cÃ´ng theo tÃªn
- `_find_pokemon_by_name(battle, pokemon_name)`: TÃ¬m PokÃ©mon Ä‘á»ƒ Ä‘á»•i
- `_get_llm_decision(battle_state)`: PhÆ°Æ¡ng thá»©c trá»«u tÆ°á»£ng - báº¡n sáº½ triá»ƒn khai trong agent cá»§a mÃ¬nh

```python
STANDARD_TOOL_SCHEMA = {
    "choose_move": {...},
    "choose_switch": {...},
}

class LLMAgentBase(Player):
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.standard_tools = STANDARD_TOOL_SCHEMA
        self.battle_history = []

    def _format_battle_state(self, battle: Battle) -> str:
        # Äá»‹nh dáº¡ng thÃ´ng tin PokÃ©mon, Ä‘Ã²n Ä‘Ã¡nh, v.v.
        ...

    def _find_move_by_name(self, battle: Battle, move_name: str) -> Optional[Move]:
        # TÃ¬m Ä‘Ã²n táº¥n cÃ´ng theo tÃªn
        ...

    def _find_pokemon_by_name(self, battle: Battle, pokemon_name: str) -> Optional[Pokemon]:
        # TÃ¬m PokÃ©mon theo tÃªn
        ...

    async def choose_move(self, battle: Battle) -> str:
        # Xá»­ lÃ½ quyáº¿t Ä‘á»‹nh tá»« LLM
        ...
    
    async def _get_llm_decision(self, battle_state: str) -> Dict[str, Any]:
        raise NotImplementedError("Subclasses must implement _get_llm_decision")
```

**MÃ£ nguá»“n Ä‘áº§y Ä‘á»§**: [agents.py](https://huggingface.co/spaces/Jofthomas/twitch_streaming/blob/main/agents.py)

## ðŸ§ª TemplateAgent
ÄÃ¢y lÃ  khuÃ´n máº«u Ä‘á»ƒ báº¡n xÃ¢y dá»±ng agent cá»§a riÃªng mÃ¬nh. ChÃºng tÃ´i cung cáº¥p [vÃ­ dá»¥ hoÃ n chá»‰nh](https://huggingface.co/spaces/Jofthomas/twitch_streaming/blob/main/agents.py) vá»›i **OpenAI**, **Mistral** vÃ  **Gemini**:

```python
class TemplateAgent(LLMAgentBase):
    """Sá»­ dá»¥ng API Template AI Ä‘á»ƒ Ä‘Æ°a ra quyáº¿t Ä‘á»‹nh."""
    def __init__(self, api_key: str = None, model: str = "model-name", *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.model = model
        self.template_client = TemplateModelProvider(api_key=...)
        self.template_tools = list(self.standard_tools.values())

    async def _get_llm_decision(self, battle_state: str) -> Dict[str, Any]:
        """Gá»­i tráº¡ng thÃ¡i tá»›i LLM vÃ  nháº­n quyáº¿t Ä‘á»‹nh dáº¡ng function call"""
        system_prompt = "Báº¡n lÃ  ..."
        user_prompt = f"..."

        try:
            response = await self.template_client.chat.completions.create(
                model=self.model,
                messages=[
                    {"role": "system", "content": system_prompt},
                    {"role": "user", "content": user_prompt},
                ],
            )
            message = response.choices[0].message
            return {"decision": {"name": function_name, "arguments": arguments}}
            
        except Exception as e:
            print(f"Lá»—i khÃ´ng mong muá»‘n: {e}")
            return {"error": f"Lá»—i khÃ´ng mong muá»‘n: {e}"}
```

HÃ£y báº¯t Ä‘áº§u xÃ¢y dá»±ng agent cáº¡nh tranh cá»§a báº¡n! ðŸ”¥