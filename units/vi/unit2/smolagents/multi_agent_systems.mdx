<CourseFloatingBanner chapter={2}
  classNames="absolute z-10 right-0 top-0"
  notebooks={[
    {label: "Google Colab", value: "https://colab.research.google.com/github/huggingface/agents-course/blob/main/notebooks/unit2/smolagents/multiagent_notebook.ipynb"},
]} />

# H·ªá th·ªëng ƒêa Agent

H·ªá th·ªëng ƒëa Agent cho ph√©p **c√°c Agent chuy√™n bi·ªát h·ª£p t√°c x·ª≠ l√Ω t√°c v·ª• ph·ª©c t·∫°p**, n√¢ng cao t√≠nh m√¥-ƒëun, kh·∫£ nƒÉng m·ªü r·ªông v√† ƒë·ªô ·ªïn ƒë·ªãnh. Thay v√¨ ph·ª• thu·ªôc v√†o m·ªôt Agent duy nh·∫•t, c√°c t√°c v·ª• ƒë∆∞·ª£c ph√¢n ph·ªëi cho nhi·ªÅu Agent v·ªõi kh·∫£ nƒÉng kh√°c nhau.

Trong **smolagents**, c√°c Agent kh√°c nhau c√≥ th·ªÉ k·∫øt h·ª£p ƒë·ªÉ t·∫°o m√£ Python, g·ªçi c√¥ng c·ª• b√™n ngo√†i, th·ª±c hi·ªán t√¨m ki·∫øm web v√† h∆°n th·∫ø. B·∫±ng c√°ch ƒëi·ªÅu ph·ªëi c√°c Agent n√†y, ta c√≥ th·ªÉ t·∫°o ra c√°c quy tr√¨nh l√†m vi·ªác m·∫°nh m·∫Ω.

M·ªôt thi·∫øt l·∫≠p ƒëi·ªÉn h√¨nh c√≥ th·ªÉ bao g·ªìm:
- **Manager Agent** (Agent qu·∫£n l√Ω) ƒë·ªÉ ph√¢n c√¥ng t√°c v·ª•  
- **Code Interpreter Agent** (Agent th√¥ng d·ªãch m√£) ƒë·ªÉ th·ª±c thi code  
- **Web Search Agent** (Agent t√¨m ki·∫øm web) ƒë·ªÉ thu th·∫≠p th√¥ng tin  

Bi·ªÉu ƒë·ªì d∆∞·ªõi minh h·ªça ki·∫øn tr√∫c ƒëa Agent ƒë∆°n gi·∫£n, n∆°i **Manager Agent** ph·ªëi h·ª£p v·ªõi **Code Interpreter Tool** v√† **Web Search Agent** - Agent n√†y l·∫°i s·ª≠ d·ª•ng c√°c c√¥ng c·ª• nh∆∞ `DuckDuckGoSearchTool` v√† `VisitWebpageTool` ƒë·ªÉ thu th·∫≠p th√¥ng tin li√™n quan.

<img src="https://mermaid.ink/img/pako:eNp1kc1qhTAQRl9FUiQb8wIpdNO76eKubrmFks1oRg3VSYgjpYjv3lFL_2hnMWQOJwn5sqgmelRWleUSKLAtFs09jqhtoWuYUFfFAa6QA9QDTnpzamheuhxn8pt40-6l13UtS0ddhtQXj6dbR4XUGQg6zEYasTF393KjeSDGnDJKNxzj8I_7hLW5IOSmP9CH9hv_NL-d94d4DVNg84p1EnK4qlIj5hGClySWbadT-6OdsrL02MI8sFOOVkciw8zx8kaNspxnrJQE0fXKtjBMMs3JA-MpgOQwftIE9Bzj14w-cMznI_39E9Z3p0uFoA?type=png" style='background: white;'>

## H·ªá th·ªëng ƒêa Agent trong th·ª±c t·∫ø

M·ªôt h·ªá th·ªëng ƒëa Agent bao g·ªìm nhi·ªÅu Agent chuy√™n bi·ªát l√†m vi·ªác c√πng nhau d∆∞·ªõi s·ª± ƒëi·ªÅu ph·ªëi c·ªßa **Orchestrator Agent** (Agent ƒëi·ªÅu ph·ªëi). C√°ch ti·∫øp c·∫≠n n√†y cho ph√©p x·ª≠ l√Ω c√°c quy tr√¨nh ph·ª©c t·∫°p b·∫±ng c√°ch ph√¢n ph·ªëi t√°c v·ª• cho c√°c Agent v·ªõi vai tr√≤ kh√°c nhau.

V√≠ d·ª•, **H·ªá th·ªëng RAG (T√¨m ki·∫øm v√† t·∫°o ra c√¢u tr·∫£ l·ªùi) ƒêa Agent** c√≥ th·ªÉ t√≠ch h·ª£p:
- **Web Agent** ƒë·ªÉ duy·ªát internet  
- **Retriever Agent** ƒë·ªÉ truy xu·∫•t th√¥ng tin t·ª´ c∆° s·ªü tri th·ª©c  
- **Image Generation Agent** ƒë·ªÉ t·∫°o h√¨nh ·∫£nh  

T·∫•t c·∫£ Agent n√†y ho·∫°t ƒë·ªông d∆∞·ªõi s·ª± ƒëi·ªÅu ph·ªëi c·ªßa m·ªôt Orchestrator qu·∫£n l√Ω vi·ªác ph√¢n c√¥ng v√† t∆∞∆°ng t√°c.

## Gi·∫£i quy·∫øt t√°c v·ª• ph·ª©c t·∫°p v·ªõi h·ªá th·ªëng ph√¢n c·∫•p ƒëa Agent

<Tip>
B·∫°n c√≥ th·ªÉ theo d√µi code trong <a href="https://huggingface.co/agents-course/notebooks/blob/main/unit2/smolagents/multiagent_notebook.ipynb" target="_blank">notebook n√†y</a> v√† ch·∫°y b·∫±ng Google Colab.
</Tip>

Bu·ªïi ti·∫øp t√¢n s·∫Øp ƒë·∫øn! V·ªõi s·ª± gi√∫p ƒë·ª° c·ªßa b·∫°n, Alfred g·∫ßn nh∆∞ ƒë√£ ho√†n th√†nh m·ªçi chu·∫©n b·ªã.

Nh∆∞ng gi·ªù ph√°t sinh v·∫•n ƒë·ªÅ: Batmobile ƒë√£ bi·∫øn m·∫•t. Alfred c·∫ßn t√¨m ph∆∞∆°ng ti·ªán thay th·∫ø v√† ph·∫£i t√¨m th·∫≠t nhanh.

May m·∫Øn thay, m·ªôt s·ªë phim ti·ªÉu s·ª≠ v·ªÅ cu·ªôc ƒë·ªùi Bruce Wayne ƒë√£ ƒë∆∞·ª£c th·ª±c hi·ªán, c√≥ l·∫Ω Alfred c√≥ th·ªÉ t√¨m th·∫•y xe b·ªè l·∫°i ·ªü tr∆∞·ªùng quay n√†o ƒë√≥ v√† n√¢ng c·∫•p l√™n ti√™u chu·∫©n hi·ªán ƒë·∫°i, ch·∫Øc ch·∫Øn bao g·ªìm c·∫£ t√≠nh nƒÉng t·ª± l√°i ho√†n to√†n.

Nh∆∞ng ƒëi·ªÅu n√†y c√≥ th·ªÉ ·ªü b·∫•t k·ª≥ ƒë√¢u trong c√°c ƒë·ªãa ƒëi·ªÉm quay phim tr√™n th·∫ø gi·ªõi - v√† s·ªë l∆∞·ª£ng c√≥ th·ªÉ r·∫•t nhi·ªÅu.

V√¨ v·∫≠y Alfred c·∫ßn b·∫°n gi√∫p ƒë·ª°. B·∫°n c√≥ th·ªÉ x√¢y d·ª±ng m·ªôt Agent gi·∫£i quy·∫øt t√°c v·ª• n√†y kh√¥ng?

> üëâ T√¨m t·∫•t c·∫£ ƒë·ªãa ƒëi·ªÉm quay phim Batman tr√™n th·∫ø gi·ªõi, t√≠nh to√°n th·ªùi gian v·∫≠n chuy·ªÉn b·∫±ng t√†u ƒë·∫øn ƒë√≥ v√† th·ªÉ hi·ªán ch√∫ng tr√™n b·∫£n ƒë·ªì v·ªõi m√†u s·∫Øc bi·∫øn ƒë·ªïi theo th·ªùi gian v·∫≠n chuy·ªÉn. ƒê·ªìng th·ªùi th·ªÉ hi·ªán c√°c nh√† m√°y si√™u xe c√≥ c√πng th·ªùi gian v·∫≠n chuy·ªÉn.

H√£y c√πng x√¢y d·ª±ng n√†o!

V√≠ d·ª• n√†y c·∫ßn m·ªôt s·ªë package b·ªï sung, h√£y c√†i ƒë·∫∑t ch√∫ng tr∆∞·ªõc:

```bash
pip install 'smolagents[litellm]' plotly geopandas shapely kaleido -q
```

### ƒê·∫ßu ti√™n t·∫°o c√¥ng c·ª• t√≠nh th·ªùi gian v·∫≠n chuy·ªÉn b·∫±ng m√°y bay ch·ªü h√†ng

```python
import math
from typing import Optional, Tuple

from smolagents import tool


@tool
def calculate_cargo_travel_time(
    origin_coords: Tuple[float, float],
    destination_coords: Tuple[float, float],
    cruising_speed_kmh: Optional[float] = 750.0,  # T·ªëc ƒë·ªô trung b√¨nh c·ªßa m√°y bay ch·ªü h√†ng
) -> float:
    """
    T√≠nh th·ªùi gian di chuy·ªÉn b·∫±ng m√°y bay ch·ªü h√†ng gi·ªØa hai ƒëi·ªÉm tr√™n Tr√°i ƒê·∫•t s·ª≠ d·ª•ng kho·∫£ng c√°ch v√≤ng cung l·ªõn.

    Args:
        origin_coords: Tuple (vƒ© ƒë·ªô, kinh ƒë·ªô) c·ªßa ƒëi·ªÉm xu·∫•t ph√°t
        destination_coords: Tuple (vƒ© ƒë·ªô, kinh ƒë·ªô) c·ªßa ƒëi·ªÉm ƒë·∫øn
        cruising_speed_kmh: T·ªëc ƒë·ªô bay t√πy ch·ªçn theo km/h (m·∫∑c ƒë·ªãnh 750 km/h cho m√°y bay ch·ªü h√†ng th√¥ng th∆∞·ªùng)

    Returns:
        float: Th·ªùi gian di chuy·ªÉn ∆∞·ªõc t√≠nh t√≠nh b·∫±ng gi·ªù

    V√≠ d·ª•:
        >>> # T·ª´ Chicago (41.8781¬∞ N, 87.6298¬∞ W) ƒë·∫øn Sydney (33.8688¬∞ S, 151.2093¬∞ E)
        >>> result = calculate_cargo_travel_time((41.8781, -87.6298), (-33.8688, 151.2093))
    """

    def to_radians(degrees: float) -> float:
        return degrees * (math.pi / 180)

    # Tr√≠ch xu·∫•t t·ªça ƒë·ªô
    lat1, lon1 = map(to_radians, origin_coords)
    lat2, lon2 = map(to_radians, destination_coords)

    # B√°n k√≠nh Tr√°i ƒê·∫•t t√≠nh b·∫±ng km
    EARTH_RADIUS_KM = 6371.0

    # T√≠nh kho·∫£ng c√°ch v√≤ng cung l·ªõn b·∫±ng c√¥ng th·ª©c haversine
    dlon = lon2 - lon1
    dlat = lat2 - lat1

    a = (
        math.sin(dlat / 2) ** 2
        + math.cos(lat1) * math.cos(lat2) * math.sin(dlon / 2) ** 2
    )
    c = 2 * math.asin(math.sqrt(a))
    distance = EARTH_RADIUS_KM * c

    # Th√™m 10% ƒë·ªÉ t√≠nh c√°c tuy·∫øn ƒë∆∞·ªùng kh√¥ng tr·ª±c ti·∫øp v√† ki·ªÉm so√°t kh√¥ng l∆∞u
    actual_distance = distance * 1.1

    # T√≠nh th·ªùi gian bay
    # Th√™m 1 gi·ªù cho quy tr√¨nh c·∫•t/h·∫° c√°nh
    flight_time = (actual_distance / cruising_speed_kmh) + 1.0

    # ƒê·ªãnh d·∫°ng k·∫øt qu·∫£
    return round(flight_time, 2)


print(calculate_cargo_travel_time((41.8781, -87.6298), (-33.8688, 151.2093)))
```

### Thi·∫øt l·∫≠p Agent

ƒê·ªëi v·ªõi nh√† cung c·∫•p model, ta s·ª≠ d·ª•ng Together AI - m·ªôt trong nh·ªØng [nh√† cung c·∫•p inference m·ªõi tr√™n Hub](https://huggingface.co/blog/inference-providers)!

GoogleSearchTool s·ª≠ d·ª•ng [Serper API](https://serper.dev) ƒë·ªÉ t√¨m ki·∫øm web, v√¨ v·∫≠y c·∫ßn thi·∫øt l·∫≠p bi·∫øn m√¥i tr∆∞·ªùng `SERPAPI_API_KEY` v√† truy·ªÅn `provider="serpapi"` ho·∫∑c c√≥ `SERPER_API_KEY` v√† truy·ªÅn `provider=serper`.

N·∫øu kh√¥ng c√≥ Serper API, b·∫°n c√≥ th·ªÉ d√πng `DuckDuckGoSearchTool` nh∆∞ng l∆∞u √Ω n√≥ c√≥ gi·ªõi h·∫°n t·ªëc ƒë·ªô.

```python
import os
from PIL import Image
from smolagents import CodeAgent, GoogleSearchTool, HfApiModel, VisitWebpageTool

model = HfApiModel(model_id="Qwen/Qwen2.5-Coder-32B-Instruct", provider="together")
```

Ta c√≥ th·ªÉ b·∫Øt ƒë·∫ßu b·∫±ng c√°ch t·∫°o m·ªôt Agent ƒë∆°n gi·∫£n l√†m baseline ƒë·ªÉ t·∫°o b√°o c√°o c∆° b·∫£n.

```python
task = """T√¨m t·∫•t c·∫£ ƒë·ªãa ƒëi·ªÉm quay phim Batman tr√™n th·∫ø gi·ªõi, t√≠nh th·ªùi gian v·∫≠n chuy·ªÉn b·∫±ng m√°y bay ch·ªü h√†ng ƒë·∫øn ƒë√¢y (ta ƒëang ·ªü Gotham, 40.7128¬∞ N, 74.0060¬∞ W) v√† tr·∫£ v·ªÅ d∆∞·ªõi d·∫°ng dataframe pandas.
ƒê·ªìng th·ªùi cung c·∫•p m·ªôt s·ªë nh√† m√°y si√™u xe c√≥ c√πng th·ªùi gian v·∫≠n chuy·ªÉn."""
```

```python
agent = CodeAgent(
    model=model,
    tools=[GoogleSearchTool("serper"), VisitWebpageTool(), calculate_cargo_travel_time],
    additional_authorized_imports=["pandas"],
    max_steps=20,
)
```

```python
result = agent.run(task)
```

```python
result
```

Trong tr∆∞·ªùng h·ª£p c·ªßa ch√∫ng ta, n√≥ t·∫°o ra k·∫øt qu·∫£:

<details>
<summary>B·∫•m ƒë·ªÉ xem b·∫£n d·ªãch ti·∫øng Vi·ªát</summary>
```python
|  | ƒê·ªãa ƒëi·ªÉm                                             | Th·ªùi gian ƒë·∫øn Gotham (gi·ªù) |
|--|------------------------------------------------------|------------------------------|
| 0  | Nghƒ©a trang Necropolis, Glasgow, Scotland, UK         | 8.60                         |
| 1  | St. George's Hall, Liverpool, Anh, UK         | 8.81                         |
| 2  | Two Temple Place, London, Anh, UK             | 9.17                         |
| 3  | Wollaton Hall, Nottingham, Anh, UK           | 9.00                         |
| 4  | Knebworth House, Knebworth, Hertfordshire, UK    | 9.15                         |
| 5  | Nh√† m√°y ƒëi·ªán Acton Lane, Acton Lane, Acton, UK  | 9.16                         |
| 6  | C·∫ßu Queensboro, New York, M·ªπ            | 1.01                         |
| 7  | Ph·ªë Wall, New York, M·ªπ                  | 1.00                         |
| 8  | Ph√°o ƒë√†i Mehrangarh, Jodhpur, ·∫§n ƒê·ªô       | 18.34                        |
| 9  | H·∫ªm n√∫i Turda, Romania                      | 11.89                        |
| 10 | Chicago, M·ªπ                                     | 2.68                         |
| 11 | Hong Kong, Trung Qu·ªëc                                 | 19.99                        |
| 12 | X∆∞·ªüng phim Cardington, Northamptonshire, UK        | 9.10                         |
| 13 | Warner Bros. Leavesden Studios, Hertfordshire, UK | 9.13                         |
| 14 | Westwood, Los Angeles, M·ªπ                  | 6.79                         |
| 15 | Woking, UK (McLaren)                             | 9.13                         |
```
</details>
```python
|  | Location                                             | Travel Time to Gotham (hours) |
|--|------------------------------------------------------|------------------------------|
| 0  | Necropolis Cemetery, Glasgow, Scotland, UK         | 8.60                         |
| 1  | St. George's Hall, Liverpool, England, UK         | 8.81                         |
| 2  | Two Temple Place, London, England, UK             | 9.17                         |
| 3  | Wollaton Hall, Nottingham, England, UK           | 9.00                         |
| 4  | Knebworth House, Knebworth, Hertfordshire, UK    | 9.15                         |
| 5  | Acton Lane Power Station, Acton Lane, Acton, UK  | 9.16                         |
| 6  | Queensboro Bridge, New York City, USA            | 1.01                         |
| 7  | Wall Street, New York City, USA                  | 1.00                         |
| 8  | Mehrangarh Fort, Jodhpur, Rajasthan, India       | 18.34                        |
| 9  | Turda Gorge, Turda, Romania                      | 11.89                        |
| 10 | Chicago, USA                                     | 2.68                         |
| 11 | Hong Kong, China                                 | 19.99                        |
| 12 | Cardington Studios, Northamptonshire, UK        | 9.10                         |
| 13 | Warner Bros. Leavesden Studios, Hertfordshire, UK | 9.13                         |
| 14 | Westwood, Los Angeles, CA, USA                  | 6.79                         |
| 15 | Woking, UK (McLaren)                             | 9.13                         |
```

Ta c√≥ th·ªÉ c·∫£i thi·ªán b·∫±ng c√°ch th√™m c√°c b∆∞·ªõc l·∫≠p k·∫ø ho·∫°ch v√† prompt chi ti·∫øt h∆°n.

C√°c b∆∞·ªõc l·∫≠p k·∫ø ho·∫°ch cho ph√©p Agent suy nghƒ© tr∆∞·ªõc v√† l√™n k·∫ø ho·∫°ch, h·ªØu √≠ch cho c√°c t√°c v·ª• ph·ª©c t·∫°p.

```python
agent.planning_interval = 4

detailed_report = agent.run(f"""
B·∫°n l√† chuy√™n gia ph√¢n t√≠ch. H√£y t·∫°o b√°o c√°o to√†n di·ªán sau khi truy c·∫≠p nhi·ªÅu website.
ƒê·ª´ng ng·∫ßn ng·∫°i t√¨m ki·∫øm nhi·ªÅu truy v·∫•n c√πng l√∫c trong v√≤ng l·∫∑p.
V·ªõi m·ªói d·ªØ li·ªáu t√¨m th·∫•y, h√£y truy c·∫≠p URL ngu·ªìn ƒë·ªÉ x√°c nh·∫≠n s·ªë li·ªáu.

{task}
""")

print(detailed_report)
```

```python
detailed_report
```

Trong tr∆∞·ªùng h·ª£p c·ªßa ch√∫ng ta, n√≥ t·∫°o ra:

<details>
<summary>B·∫•m ƒë·ªÉ xem b·∫£n d·ªãch ti·∫øng Vi·ªát</summary>
```python
|  | ƒê·ªãa ƒëi·ªÉm                                         | Th·ªùi gian di chuy·ªÉn (gi·ªù) |
|--|--------------------------------------------------|---------------------|
| 0  | C·∫ßu Than th·ªü, Nghƒ©a trang Glasgow, UK | 8.6                 |
| 1  | Ph·ªë Wishart, Glasgow, Scotland, UK         | 8.6                 |
```
</details>
```python
|  | Location                                         | Travel Time (hours) |
|--|--------------------------------------------------|---------------------|
| 0  | Bridge of Sighs, Glasgow Necropolis, Glasgow, UK | 8.6                 |
| 1  | Wishart Street, Glasgow, Scotland, UK         | 8.6                 |


Nh·ªù nh·ªØng thay ƒë·ªïi nhanh ch√≥ng n√†y, ta ƒë√£ c√≥ b√°o c√°o c√¥ ƒë·ªçng h∆°n ch·ªâ b·∫±ng c√°ch cung c·∫•p prompt chi ti·∫øt v√† th√™m kh·∫£ nƒÉng l·∫≠p k·∫ø ho·∫°ch cho Agent!

C·ª≠a s·ªï ng·ªØ c·∫£nh c·ªßa model ƒëang nhanh ch√≥ng b·ªã l·∫•p ƒë·∫ßy. **N·∫øu y√™u c·∫ßu Agent k·∫øt h·ª£p k·∫øt qu·∫£ t·ª´ nhi·ªÅu t√¨m ki·∫øm, n√≥ s·∫Ω ch·∫≠m d·∫ßn v√† l√†m tƒÉng token c√πng chi ph√≠**.

‚û°Ô∏è Ch√∫ng ta c·∫ßn c·∫£i thi·ªán c·∫•u tr√∫c h·ªá th·ªëng.

### ‚úåÔ∏è Chia t√°c v·ª• gi·ªØa hai Agent

C·∫•u tr√∫c ƒëa Agent cho ph√©p t√°ch bi·ªát b·ªô nh·ªõ gi·ªØa c√°c t√°c v·ª• con, mang l·∫°i hai l·ª£i √≠ch l·ªõn:
- M·ªói Agent t·∫≠p trung h∆°n v√†o t√°c v·ª• ch√≠nh, t·ª´ ƒë√≥ hi·ªáu su·∫•t cao h∆°n
- T√°ch bi·ªát b·ªô nh·ªõ l√†m gi·∫£m s·ªë l∆∞·ª£ng token ƒë·∫ßu v√†o ·ªü m·ªói b∆∞·ªõc, gi·∫£m ƒë·ªô tr·ªÖ v√† chi ph√≠.

H√£y t·∫°o m·ªôt nh√≥m v·ªõi Agent t√¨m ki·∫øm web chuy√™n d·ª•ng, ƒë∆∞·ª£c qu·∫£n l√Ω b·ªüi m·ªôt Agent kh√°c.

Agent qu·∫£n l√Ω c·∫ßn kh·∫£ nƒÉng v·∫Ω bi·ªÉu ƒë·ªì ƒë·ªÉ t·∫°o b√°o c√°o cu·ªëi: h√£y c·∫•p quy·ªÅn truy c·∫≠p c√°c th∆∞ vi·ªán nh∆∞ `plotly`, `geopandas` + `shapely` cho vi·ªác v·∫Ω b·∫£n ƒë·ªì.

```python
model = HfApiModel(
    "Qwen/Qwen2.5-Coder-32B-Instruct", provider="together", max_tokens=8096
)

web_agent = CodeAgent(
    model=model,
    tools=[
        GoogleSearchTool(provider="serper"),
        VisitWebpageTool(),
        calculate_cargo_travel_time,
    ],
    name="web_agent",
    description="Duy·ªát web ƒë·ªÉ t√¨m th√¥ng tin",
    verbosity_level=0,
    max_steps=10,
)
```

Agent qu·∫£n l√Ω c·∫ßn x·ª≠ l√Ω c√°c t√°c v·ª• n·∫∑ng v·ªÅ t∆∞ duy.

V√¨ v·∫≠y ta s·ª≠ d·ª•ng model m·∫°nh h∆°n [DeepSeek-R1](https://huggingface.co/deepseek-ai/DeepSeek-R1), v√† th√™m `planning_interval`.

```python
from smolagents.utils import encode_image_base64, make_image_url
from smolagents import OpenAIServerModel


def check_reasoning_and_plot(final_answer, agent_memory):
    multimodal_model = OpenAIServerModel("gpt-4o", max_tokens=8096)
    filepath = "saved_map.png"
    assert os.path.exists(filepath), "H√£y ƒë·∫£m b·∫£o l∆∞u bi·ªÉu ƒë·ªì d∆∞·ªõi t√™n saved_map.png!"
    image = Image.open(filepath)
    prompt = (
        f"ƒê√¢y l√† t√°c v·ª• ng∆∞·ªùi d√πng v√† c√°c b∆∞·ªõc Agent ƒë√£ th·ª±c hi·ªán: {agent_memory.get_succinct_steps()}. ƒê√¢y l√† bi·ªÉu ƒë·ªì ƒë∆∞·ª£c t·∫°o."
        "H√£y ki·ªÉm tra xem qu√° tr√¨nh l·∫≠p lu·∫≠n v√† bi·ªÉu ƒë·ªì c√≥ ch√≠nh x√°c kh√¥ng: ch√∫ng c√≥ tr·∫£ l·ªùi ƒë√∫ng t√°c v·ª• ƒë∆∞·ª£c giao kh√¥ng?"
        "ƒê·∫ßu ti√™n li·ªát k√™ l√Ω do t·∫°i sao ƒë√∫ng/sai, sau ƒë√≥ ƒë∆∞a ra quy·∫øt ƒë·ªãnh cu·ªëi: VI·∫æT HOA PASS n·∫øu ƒë·∫°t y√™u c·∫ßu, FAIL n·∫øu kh√¥ng."
        "ƒê·ª´ng qu√° kh·∫Øt khe: n·∫øu bi·ªÉu ƒë·ªì gi·∫£i quy·∫øt ƒë∆∞·ª£c ph·∫ßn l·ªõn t√°c v·ª•, n√™n pass."
        "ƒê·ªÉ pass, bi·ªÉu ƒë·ªì ph·∫£i ƒë∆∞·ª£c t·∫°o b·∫±ng px.scatter_map ch·ª© kh√¥ng ph·∫£i ph∆∞∆°ng ph√°p kh√°c (scatter_map tr√¥ng ƒë·∫πp h∆°n)."
    )
    messages = [
        {
            "role": "user",
            "content": [
                {
                    "type": "text",
                    "text": prompt,
                },
                {
                    "type": "image_url",
                    "image_url": {"url": make_image_url(encode_image_base64(image))},
                },
            ],
        }
    ]
    output = multimodal_model(messages).content
    print("Ph·∫£n h·ªìi: ", output)
    if "FAIL" in output:
        raise Exception(output)
    return True


manager_agent = CodeAgent(
    model=HfApiModel("deepseek-ai/DeepSeek-R1", provider="together", max_tokens=8096),
    tools=[calculate_cargo_travel_time],
    managed_agents=[web_agent],
    additional_authorized_imports=[
        "geopandas",
        "plotly",
        "shapely",
        "json",
        "pandas",
        "numpy",
    ],
    planning_interval=5,
    verbosity_level=2,
    final_answer_checks=[check_reasoning_and_plot],
    max_steps=15,
)
```

H√£y xem c·∫•u tr√∫c nh√≥m Agent:

```python
manager_agent.visualize()
```

K·∫øt qu·∫£ s·∫Ω t∆∞∆°ng t·ª± th·∫ø n√†y, gi√∫p ta hi·ªÉu m·ªëi quan h·ªá gi·ªØa c√°c Agent v√† c√¥ng c·ª• s·ª≠ d·ª•ng:

<details>
<summary>B·∫•m ƒë·ªÉ xem b·∫£n d·ªãch ti·∫øng Vi·ªát</summary>
```python
CodeAgent | deepseek-ai/DeepSeek-R1
‚îú‚îÄ‚îÄ ‚úÖ C√°c import ƒë∆∞·ª£c ph√©p: ['geopandas', 'plotly', 'shapely', 'json', 'pandas', 'numpy']
‚îú‚îÄ‚îÄ üõ†Ô∏è C√¥ng c·ª•:
‚îÇ   ‚îè‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î≥‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î≥‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îì
‚îÇ   ‚îÉ T√™n                        ‚îÉ M√¥ t·∫£                           ‚îÉ Tham s·ªë                             ‚îÉ
‚îÇ   ‚î°‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïá‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïá‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î©
‚îÇ   ‚îÇ calculate_cargo_travel_time ‚îÇ T√≠nh th·ªùi gian di chuy·ªÉn m√°y bay ch·ªü h√†ng gi·ªØa hai ƒëi·ªÉm tr√™n Tr√°i ƒê·∫•t     ‚îÇ origin_coords (`array`): Tuple (vƒ© ƒë·ªô, kinh ƒë·ªô) ƒëi·ªÉm xu·∫•t ph√°t                        ‚îÇ
‚îÇ   ‚îÇ                             ‚îÇ                                       ‚îÇ destination_coords (`array`): Tuple (vƒ© ƒë·ªô, kinh ƒë·ªô) ƒëi·ªÉm ƒë·∫øn                           ‚îÇ
‚îÇ   ‚îÇ                             ‚îÇ                                       ‚îÇ cruising_speed_kmh (`number`): T·ªëc ƒë·ªô bay t√πy ch·ªçn (m·∫∑c ƒë·ªãnh 750 km/h)                         ‚îÇ
‚îÇ   ‚îÇ final_answer                ‚îÇ Cung c·∫•p c√¢u tr·∫£ l·ªùi cu·ªëi c√πng       ‚îÇ answer (`any`): C√¢u tr·∫£ l·ªùi cu·ªëi c√πng                           ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îî‚îÄ‚îÄ ü§ñ C√°c Agent qu·∫£n l√Ω:
    ‚îî‚îÄ‚îÄ web_agent | CodeAgent | Qwen/Qwen2.5-Coder-32B-Instruct
        ‚îú‚îÄ‚îÄ ‚úÖ C√°c import ƒë∆∞·ª£c ph√©p: []
        ‚îú‚îÄ‚îÄ üìù M√¥ t·∫£: Duy·ªát web ƒë·ªÉ t√¨m th√¥ng tin
        ‚îî‚îÄ‚îÄ üõ†Ô∏è C√¥ng c·ª•:
            ‚îè‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î≥‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î≥‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îì
            ‚îÉ T√™n                        ‚îÉ M√¥ t·∫£                       ‚îÉ Tham s·ªë                         ‚îÉ
            ‚î°‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïá‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïá‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î©
            ‚îÇ web_search                  ‚îÇ Th·ª±c hi·ªán t√¨m ki·∫øm Google       ‚îÇ query (`string`): Truy v·∫•n t√¨m ki·∫øm                 ‚îÇ
            ‚îÇ visit_webpage               ‚îÇ Truy c·∫≠p webpage               ‚îÇ url (`string`): URL c·∫ßn truy c·∫≠p                 ‚îÇ
            ‚îÇ calculate_cargo_travel_time ‚îÇ T√≠nh th·ªùi gian di chuy·ªÉn m√°y bay ch·ªü h√†ng ‚îÇ origin_coords (`array`): Tuple (vƒ© ƒë·ªô, kinh ƒë·ªô) ƒëi·ªÉm xu·∫•t ph√°t                    ‚îÇ
            ‚îÇ final_answer                ‚îÇ Cung c·∫•p c√¢u tr·∫£ l·ªùi cu·ªëi c√πng  ‚îÇ answer (`any`): C√¢u tr·∫£ l·ªùi cu·ªëi c√πng                    ‚îÇ
            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```
</details>
```python
CodeAgent | deepseek-ai/DeepSeek-R1
‚îú‚îÄ‚îÄ ‚úÖ Authorized imports: ['geopandas', 'plotly', 'shapely', 'json', 'pandas', 'numpy']
‚îú‚îÄ‚îÄ üõ†Ô∏è Tools:
‚îÇ   ‚îè‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î≥‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î≥‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îì
‚îÇ   ‚îÉ Name                        ‚îÉ Description                           ‚îÉ Arguments                             ‚îÉ
‚îÇ   ‚î°‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïá‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïá‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î©
‚îÇ   ‚îÇ calculate_cargo_travel_time ‚îÇ Calculate the travel time for a cargo ‚îÇ origin_coords (`array`): Tuple of     ‚îÇ
‚îÇ   ‚îÇ                             ‚îÇ plane between two points on Earth     ‚îÇ (latitude, longitude) for the         ‚îÇ
‚îÇ   ‚îÇ                             ‚îÇ using great-circle distance.          ‚îÇ starting point                        ‚îÇ
‚îÇ   ‚îÇ                             ‚îÇ                                       ‚îÇ destination_coords (`array`): Tuple   ‚îÇ
‚îÇ   ‚îÇ                             ‚îÇ                                       ‚îÇ of (latitude, longitude) for the      ‚îÇ
‚îÇ   ‚îÇ                             ‚îÇ                                       ‚îÇ destination                           ‚îÇ
‚îÇ   ‚îÇ                             ‚îÇ                                       ‚îÇ cruising_speed_kmh (`number`):        ‚îÇ
‚îÇ   ‚îÇ                             ‚îÇ                                       ‚îÇ Optional cruising speed in km/h       ‚îÇ
‚îÇ   ‚îÇ                             ‚îÇ                                       ‚îÇ (defaults to 750 km/h for typical     ‚îÇ
‚îÇ   ‚îÇ                             ‚îÇ                                       ‚îÇ cargo planes)                         ‚îÇ
‚îÇ   ‚îÇ final_answer                ‚îÇ Provides a final answer to the given  ‚îÇ answer (`any`): The final answer to   ‚îÇ
‚îÇ   ‚îÇ                             ‚îÇ problem.                              ‚îÇ the problem                           ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îî‚îÄ‚îÄ ü§ñ Managed agents:
    ‚îî‚îÄ‚îÄ web_agent | CodeAgent | Qwen/Qwen2.5-Coder-32B-Instruct
        ‚îú‚îÄ‚îÄ ‚úÖ Authorized imports: []
        ‚îú‚îÄ‚îÄ üìù Description: Browses the web to find information
        ‚îî‚îÄ‚îÄ üõ†Ô∏è Tools:
            ‚îè‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î≥‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î≥‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îì
            ‚îÉ Name                        ‚îÉ Description                       ‚îÉ Arguments                         ‚îÉ
            ‚î°‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïá‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïá‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î©
            ‚îÇ web_search                  ‚îÇ Performs a google web search for  ‚îÇ query (`string`): The search      ‚îÇ
            ‚îÇ                             ‚îÇ your query then returns a string  ‚îÇ query to perform.                 ‚îÇ
            ‚îÇ                             ‚îÇ of the top search results.        ‚îÇ filter_year (`integer`):          ‚îÇ
            ‚îÇ                             ‚îÇ                                   ‚îÇ Optionally restrict results to a  ‚îÇ
            ‚îÇ                             ‚îÇ                                   ‚îÇ certain year                      ‚îÇ
            ‚îÇ visit_webpage               ‚îÇ Visits a webpage at the given url ‚îÇ url (`string`): The url of the    ‚îÇ
            ‚îÇ                             ‚îÇ and reads its content as a        ‚îÇ webpage to visit.                 ‚îÇ
            ‚îÇ                             ‚îÇ markdown string. Use this to      ‚îÇ                                   ‚îÇ
            ‚îÇ                             ‚îÇ browse webpages.                  ‚îÇ                                   ‚îÇ
            ‚îÇ calculate_cargo_travel_time ‚îÇ Calculate the travel time for a   ‚îÇ origin_coords (`array`): Tuple of ‚îÇ
            ‚îÇ                             ‚îÇ cargo plane between two points on ‚îÇ (latitude, longitude) for the     ‚îÇ
            ‚îÇ                             ‚îÇ Earth using great-circle          ‚îÇ starting point                    ‚îÇ
            ‚îÇ                             ‚îÇ distance.                         ‚îÇ destination_coords (`array`):     ‚îÇ
            ‚îÇ                             ‚îÇ                                   ‚îÇ Tuple of (latitude, longitude)    ‚îÇ
            ‚îÇ                             ‚îÇ                                   ‚îÇ for the destination               ‚îÇ
            ‚îÇ                             ‚îÇ                                   ‚îÇ cruising_speed_kmh (`number`):    ‚îÇ
            ‚îÇ                             ‚îÇ                                   ‚îÇ Optional cruising speed in km/h   ‚îÇ
            ‚îÇ                             ‚îÇ                                   ‚îÇ (defaults to 750 km/h for typical ‚îÇ
            ‚îÇ                             ‚îÇ                                   ‚îÇ cargo planes)                     ‚îÇ
            ‚îÇ final_answer                ‚îÇ Provides a final answer to the    ‚îÇ answer (`any`): The final answer  ‚îÇ
            ‚îÇ                             ‚îÇ given problem.                    ‚îÇ to the problem                    ‚îÇ
            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

```python
manager_agent.run("""
T√¨m t·∫•t c·∫£ ƒë·ªãa ƒëi·ªÉm quay phim Batman tr√™n th·∫ø gi·ªõi, t√≠nh th·ªùi gian v·∫≠n chuy·ªÉn b·∫±ng m√°y bay ch·ªü h√†ng ƒë·∫øn ƒë√¢y (ta ƒëang ·ªü Gotham, 40.7128¬∞ N, 74.0060¬∞ W).
ƒê·ªìng th·ªùi cung c·∫•p m·ªôt s·ªë nh√† m√°y si√™u xe c√≥ c√πng th·ªùi gian v·∫≠n chuy·ªÉn. C·∫ßn √≠t nh·∫•t 6 ƒëi·ªÉm t·ªïng c·ªông.
Bi·ªÉu di·ªÖn d·ªØ li·ªáu d∆∞·ªõi d·∫°ng b·∫£n ƒë·ªì th·∫ø gi·ªõi, c√°c ƒë·ªãa ƒëi·ªÉm hi·ªÉn th·ªã b·∫±ng ƒëi·ªÉm ph√¢n t√°n v·ªõi m√†u ph·ª• thu·ªôc v√†o th·ªùi gian v·∫≠n chuy·ªÉn, v√† l∆∞u v√†o saved_map.png!

ƒê√¢y l√† v√≠ d·ª• c√°ch v·∫Ω v√† tr·∫£ v·ªÅ b·∫£n ƒë·ªì:
import plotly.express as px
df = px.data.carshare()
fig = px.scatter_map(df, lat="centroid_lat", lon="centroid_lon", text="name", color="peak_hour", size=100,
     color_continuous_scale=px.colors.sequential.Magma, size_max=15, zoom=1)
fig.show()
fig.write_image("saved_image.png")
final_answer(fig)

Kh√¥ng bao gi·ªù x·ª≠ l√Ω chu·ªói b·∫±ng code: khi c√≥ chu·ªói c·∫ßn ƒë·ªçc, ch·ªâ c·∫ßn in ra v√† b·∫°n s·∫Ω th·∫•y n√≥.
""")
```

T√¥i kh√¥ng bi·∫øt k·∫øt qu·∫£ ch·∫°y c·ªßa b·∫°n th·∫ø n√†o, nh∆∞ng trong tr∆∞·ªùng h·ª£p c·ªßa t√¥i, Agent qu·∫£n l√Ω ƒë√£ kh√©o l√©o ph√¢n chia t√°c v·ª• cho web_agent trong `1. T√¨m ƒë·ªãa ƒëi·ªÉm quay Batman`, sau ƒë√≥ `2. T√¨m nh√† m√°y si√™u xe`, tr∆∞·ªõc khi t·ªïng h·ª£p danh s√°ch v√† v·∫Ω b·∫£n ƒë·ªì.

H√£y xem b·∫£n ƒë·ªì tr√¥ng th·∫ø n√†o b·∫±ng c√°ch ki·ªÉm tra tr·ª±c ti·∫øp t·ª´ tr·∫°ng th√°i Agent:

```python
manager_agent.python_executor.state["fig"]
```

K·∫øt qu·∫£ s·∫Ω hi·ªÉn th·ªã b·∫£n ƒë·ªì:

![B·∫£n ƒë·ªì v√≠ d·ª• h·ªá th·ªëng ƒëa Agent](https://huggingface.co/datasets/agents-course/course-images/resolve/main/en/unit2/smolagents/output_map.png)

## T√†i nguy√™n

- [H·ªá th·ªëng ƒêa Agent](https://huggingface.co/docs/smolagents/main/en/examples/multiagents) ‚Äì