<CourseFloatingBanner chapter={2}
  classNames="absolute z-10 right-0 top-0"
  notebooks={[
    {label: "Google Colab", value: "https://colab.research.google.com/github/huggingface/agents-course/blob/main/notebooks/unit2/smolagents/tool_calling_agents.ipynb"},
]} />

# Viáº¿t cÃ¡c hÃ nh Ä‘á»™ng dÆ°á»›i dáº¡ng Ä‘oáº¡n code hoáº·c JSON

<Tip>
Báº¡n cÃ³ thá»ƒ theo dÃµi code trong <a href="https://huggingface.co/agents-course/notebooks/blob/main/unit2/smolagents/tool_calling_agents.ipynb" target="_blank">notebook nÃ y</a> mÃ  báº¡n cÃ³ thá»ƒ cháº¡y trÃªn Google Colab.
</Tip>

Tool Calling Agents lÃ  loáº¡i Agent thá»© hai cÃ³ trong `smolagents`. KhÃ¡c vá»›i Code Agent sá»­ dá»¥ng Ä‘oáº¡n code Python, cÃ¡c Agent nÃ y **sá»­ dá»¥ng kháº£ nÄƒng gá»i cÃ´ng cá»¥ tÃ­ch há»£p sáºµn cá»§a cÃ¡c nhÃ  cung cáº¥p LLM** Ä‘á»ƒ táº¡o ra cÃ¡c lá»‡nh gá»i cÃ´ng cá»¥ dÆ°á»›i dáº¡ng **cáº¥u trÃºc JSON**. ÄÃ¢y lÃ  cÃ¡ch tiáº¿p cáº­n tiÃªu chuáº©n Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi OpenAI, Anthropic vÃ  nhiá»u nhÃ  cung cáº¥p khÃ¡c.

HÃ£y xem má»™t vÃ­ dá»¥. Khi Alfred muá»‘n tÃ¬m kiáº¿m dá»‹ch vá»¥ catering vÃ  Ã½ tÆ°á»Ÿng tiá»‡c tÃ¹ng, má»™t `CodeAgent` sáº½ táº¡o vÃ  cháº¡y code Python nhÆ° tháº¿ nÃ y:

```python
for query in [
    "Best catering services in Gotham City", 
    "Party theme ideas for superheroes"
]:
    print(web_search(f"Search for: {query}"))
```

Trong khi Ä‘Ã³, `ToolCallingAgent` sáº½ táº¡o ra cáº¥u trÃºc JSON:

```python
[
    {"name": "web_search", "arguments": "Best catering services in Gotham City"},
    {"name": "web_search", "arguments": "Party theme ideas for superheroes"}
]
```

JSON nÃ y sau Ä‘Ã³ Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ thá»±c thi cÃ¡c lá»‡nh gá»i cÃ´ng cá»¥.

DÃ¹ `smolagents` táº­p trung chá»§ yáº¿u vÃ o `CodeAgents` vÃ¬ [chÃºng hoáº¡t Ä‘á»™ng tá»‘t hÆ¡n tá»•ng thá»ƒ](https://arxiv.org/abs/2402.01030), `ToolCallingAgents` cÃ³ thá»ƒ hiá»‡u quáº£ cho cÃ¡c há»‡ thá»‘ng Ä‘Æ¡n giáº£n khÃ´ng cáº§n xá»­ lÃ½ biáº¿n hay cÃ¡c lá»‡nh gá»i cÃ´ng cá»¥ phá»©c táº¡p.

![HÃ nh Ä‘á»™ng dáº¡ng Code vs JSON](https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/transformers/code_vs_json_actions.png)  

## Tool Calling Agents hoáº¡t Ä‘á»™ng tháº¿ nÃ o?  

Tool Calling Agents tuÃ¢n theo quy trÃ¬nh lÃ m viá»‡c Ä‘a bÆ°á»›c giá»‘ng nhÆ° Code Agents (xem chi tiáº¿t á»Ÿ [pháº§n trÆ°á»›c](./code_agents)). 

Äiá»ƒm khÃ¡c biá»‡t chÃ­nh náº±m á»Ÿ **cÃ¡ch chÃºng cáº¥u trÃºc hÃ nh Ä‘á»™ng**: thay vÃ¬ code cÃ³ thá»ƒ thá»±c thi, chÃºng **táº¡o ra cÃ¡c Ä‘á»‘i tÆ°á»£ng JSON xÃ¡c Ä‘á»‹nh tÃªn cÃ´ng cá»¥ vÃ  tham sá»‘**. Há»‡ thá»‘ng sau Ä‘Ã³ **phÃ¢n tÃ­ch cÃ¡c hÆ°á»›ng dáº«n nÃ y** Ä‘á»ƒ thá»±c thi cÃ´ng cá»¥ phÃ¹ há»£p.

## VÃ­ dá»¥: Cháº¡y Tool Calling Agent  

HÃ£y xem láº¡i vÃ­ dá»¥ trÆ°á»›c khi Alfred báº¯t Ä‘áº§u chuáº©n bá»‹ tiá»‡c, nhÆ°ng láº§n nÃ y ta sáº½ dÃ¹ng `ToolCallingAgent` Ä‘á»ƒ lÃ m ná»•i báº­t sá»± khÃ¡c biá»‡t. Ta sáº½ xÃ¢y dá»±ng má»™t Agent cÃ³ thá»ƒ tÃ¬m kiáº¿m web báº±ng DuckDuckGo, giá»‘ng nhÆ° trong vÃ­ dá»¥ Code Agent. Äiá»ƒm khÃ¡c biá»‡t duy nháº¥t lÃ  loáº¡i Agent - framework sáº½ xá»­ lÃ½ má»i thá»© cÃ²n láº¡i:

```python
from smolagents import ToolCallingAgent, DuckDuckGoSearchTool, HfApiModel

agent = ToolCallingAgent(tools=[DuckDuckGoSearchTool()], model=HfApiModel())

agent.run("Search for the best music recommendations for a party at the Wayne's mansion.")
```

Khi kiá»ƒm tra trace cá»§a Agent, thay vÃ¬ tháº¥y `Executing parsed code:`, báº¡n sáº½ tháº¥y:

```text
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Calling tool: 'web_search' with arguments: {'query': "best music recommendations for a party at Wayne's         â”‚
â”‚ mansion"}                                                                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```  

Agent táº¡o ra má»™t lá»‡nh gá»i cÃ´ng cá»¥ cÃ³ cáº¥u trÃºc mÃ  há»‡ thá»‘ng xá»­ lÃ½ Ä‘á»ƒ táº¡o Ä‘áº§u ra, thay vÃ¬ trá»±c tiáº¿p thá»±c thi code nhÆ° `CodeAgent`.

Giá» khi Ä‘Ã£ hiá»ƒu cáº£ hai loáº¡i Agent, ta cÃ³ thá»ƒ chá»n loáº¡i phÃ¹ há»£p cho nhu cáº§u cá»§a mÃ¬nh. HÃ£y tiáº¿p tá»¥c khÃ¡m phÃ¡ `smolagents` Ä‘á»ƒ biáº¿n bá»¯a tiá»‡c cá»§a Alfred thÃ nh cÃ´ng! ğŸ‰

## TÃ i nguyÃªn

- [TÃ i liá»‡u ToolCallingAgent](https://huggingface.co/docs/smolagents/v1.8.1/en/reference/agents#smolagents.ToolCallingAgent) - TÃ i liá»‡u chÃ­nh thá»©c vá» ToolCallingAgent