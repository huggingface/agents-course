# XÃ¢y Dá»±ng LangGraph Äáº§u TiÃªn Cá»§a Báº¡n

Giá» ta Ä‘Ã£ hiá»ƒu cÃ¡c thÃ nh pháº§n cÆ¡ báº£n, hÃ£y Ã¡p dá»¥ng chÃºng vÃ o thá»±c táº¿ báº±ng cÃ¡ch xÃ¢y dá»±ng Ä‘á»“ thá»‹ chá»©c nÄƒng Ä‘áº§u tiÃªn. Ta sáº½ triá»ƒn khai há»‡ thá»‘ng xá»­ lÃ½ email cá»§a Alfred, nÆ¡i anh áº¥y cáº§n:

1. Äá»c email Ä‘áº¿n
2. PhÃ¢n loáº¡i spam hoáº·c há»£p lá»‡
3. Soáº¡n tháº£o pháº£n há»“i sÆ¡ bá»™ cho email há»£p lá»‡
4. Gá»­i thÃ´ng tin cho Ã´ng Wayne khi há»£p lá»‡ (chá»‰ in ra)

VÃ­ dá»¥ nÃ y minh há»a cÃ¡ch cáº¥u trÃºc má»™t quy trÃ¬nh lÃ m viá»‡c vá»›i LangGraph cÃ³ liÃªn quan Ä‘áº¿n viá»‡c ra quyáº¿t Ä‘á»‹nh dá»±a trÃªn LLM. DÃ¹ Ä‘Ã¢y chÆ°a Ä‘Æ°á»£c coi lÃ  má»™t Agent (tÃ¡c nhÃ¢n) vÃ¬ khÃ´ng cÃ³ cÃ´ng cá»¥ nÃ o Ä‘Æ°á»£c sá»­ dá»¥ng, pháº§n nÃ y táº­p trung vÃ o viá»‡c há»c framework LangGraph hÆ¡n lÃ  vá» Agents.

<Tip>
Báº¡n cÃ³ thá»ƒ theo dÃµi code trong <a href="https://huggingface.co/agents-course/notebooks/blob/main/unit2/langgraph/mail_sorting.ipynb" target="_blank">notebook nÃ y</a> vÃ  cháº¡y qua Google Colab.
</Tip>

## Quy TrÃ¬nh LÃ m Viá»‡c Cá»§a ChÃºng Ta

ÄÃ¢y lÃ  quy trÃ¬nh ta sáº½ xÃ¢y dá»±ng:
<img src="https://huggingface.co/datasets/agents-course/course-images/resolve/main/en/unit2/LangGraph/first_graph.png" alt="First LangGraph"/>

## Thiáº¿t Láº­p MÃ´i TrÆ°á»ng

Äáº§u tiÃªn, cÃ i Ä‘áº·t cÃ¡c gÃ³i cáº§n thiáº¿t:

```python
%pip install langgraph langchain_openai
```

Nháº­p cÃ¡c module cáº§n thiáº¿t:

```python
import os
from typing import TypedDict, List, Dict, Any, Optional
from langgraph.graph import StateGraph, END
from langchain_openai import ChatOpenAI
from langchain_core.messages import HumanMessage, AIMessage
```

## BÆ°á»›c 1: Äá»‹nh NghÄ©a Tráº¡ng ThÃ¡i

HÃ£y xÃ¡c Ä‘á»‹nh thÃ´ng tin Alfred cáº§n theo dÃµi trong quy trÃ¬nh xá»­ lÃ½ email:

```python
class EmailState(TypedDict):
    # Email Ä‘ang Ä‘Æ°á»£c xá»­ lÃ½
    email: Dict[str, Any]  # Chá»©a subject, sender, body, v.v.
    
    # PhÃ¢n tÃ­ch vÃ  quyáº¿t Ä‘á»‹nh
    is_spam: Optional[bool]
    
    # Táº¡o pháº£n há»“i
    draft_response: Optional[str]
    
    # Metadata xá»­ lÃ½
    messages: List[Dict[str, Any]]  # Theo dÃµi há»™i thoáº¡i vá»›i LLM Ä‘á»ƒ phÃ¢n tÃ­ch
```

> ğŸ’¡ **Máº¹o:** Thiáº¿t káº¿ tráº¡ng thÃ¡i Ä‘á»§ chi tiáº¿t Ä‘á»ƒ theo dÃµi má»i thÃ´ng tin quan trá»ng, nhÆ°ng trÃ¡nh lÃ m phÃ¬nh to vá»›i cÃ¡c chi tiáº¿t khÃ´ng cáº§n thiáº¿t.

## BÆ°á»›c 2: Äá»‹nh NghÄ©a CÃ¡c Node

Giá» hÃ£y táº¡o cÃ¡c hÃ m xá»­ lÃ½ sáº½ táº¡o thÃ nh cÃ¡c node:

```python
# Khá»Ÿi táº¡o LLM
model = ChatOpenAI(temperature=0)

def read_email(state: EmailState):
    """Alfred Ä‘á»c vÃ  ghi nháº­n email Ä‘áº¿n"""
    email = state["email"]
    
    # CÃ³ thá»ƒ thá»±c hiá»‡n tiá»n xá»­ lÃ½ ban Ä‘áº§u á»Ÿ Ä‘Ã¢y
    print(f"Alfred Ä‘ang xá»­ lÃ½ email tá»« {email['sender']} vá»›i chá»§ Ä‘á»: {email['subject']}")
    
    # KhÃ´ng cáº§n thay Ä‘á»•i tráº¡ng thÃ¡i á»Ÿ Ä‘Ã¢y
    return {}

def classify_email(state: EmailState):
    """Alfred sá»­ dá»¥ng LLM Ä‘á»ƒ xÃ¡c Ä‘á»‹nh email lÃ  spam hay há»£p lá»‡"""
    email = state["email"]
    
    # Chuáº©n bá»‹ prompt cho LLM
    prompt = f"""
    Vá»›i vai trÃ² lÃ  quáº£n gia Alfred, hÃ£y phÃ¢n tÃ­ch email nÃ y vÃ  xÃ¡c Ä‘á»‹nh xem nÃ³ lÃ  spam hay há»£p lá»‡.
    
    Email:
    Tá»«: {email['sender']}
    Chá»§ Ä‘á»: {email['subject']}
    Ná»™i dung: {email['body']}
    
    Äáº§u tiÃªn, xÃ¡c Ä‘á»‹nh xem email nÃ y cÃ³ pháº£i spam khÃ´ng. Náº¿u lÃ  spam, giáº£i thÃ­ch lÃ½ do.
    Náº¿u há»£p lá»‡, phÃ¢n loáº¡i nÃ³ (há»i Ä‘Ã¡p, khiáº¿u náº¡i, cáº£m Æ¡n, v.v.).
    """
    
    # Gá»i LLM
    messages = [HumanMessage(content=prompt)]
    response = model.invoke(messages)
    
    # Logic Ä‘Æ¡n giáº£n Ä‘á»ƒ phÃ¢n tÃ­ch pháº£n há»“i (trong á»©ng dá»¥ng thá»±c táº¿ cáº§n phÃ¢n tÃ­ch ká»¹ hÆ¡n)
    response_text = response.content.lower()
    is_spam = "spam" in response_text and "not spam" not in response_text
    
    # TrÃ­ch xuáº¥t lÃ½ do náº¿u lÃ  spam
    spam_reason = None
    if is_spam and "reason:" in response_text:
        spam_reason = response_text.split("reason:")[1].strip()
    
    # XÃ¡c Ä‘á»‹nh loáº¡i email náº¿u há»£p lá»‡
    email_category = None
    if not is_spam:
        categories = ["inquiry", "complaint", "thank you", "request", "information"]
        for category in categories:
            if category in response_text:
                email_category = category
                break
    
    # Cáº­p nháº­t messages Ä‘á»ƒ theo dÃµi
    new_messages = state.get("messages", []) + [
        {"role": "user", "content": prompt},
        {"role": "assistant", "content": response.content}
    ]
    
    # Tráº£ vá» cÃ¡c thay Ä‘á»•i tráº¡ng thÃ¡i
    return {
        "is_spam": is_spam,
        "spam_reason": spam_reason,
        "email_category": email_category,
        "messages": new_messages
    }

def handle_spam(state: EmailState):
    """Alfred loáº¡i bá» email spam vá»›i ghi chÃº"""
    print(f"Alfred Ä‘Ã£ Ä‘Ã¡nh dáº¥u email lÃ  spam. LÃ½ do: {state['spam_reason']}")
    print("Email Ä‘Ã£ Ä‘Æ°á»£c chuyá»ƒn vÃ o thÆ° má»¥c spam.")
    
    # HoÃ n thÃ nh xá»­ lÃ½ email nÃ y
    return {}

def draft_response(state: EmailState):
    """Alfred soáº¡n tháº£o pháº£n há»“i sÆ¡ bá»™ cho email há»£p lá»‡"""
    email = state["email"]
    category = state["email_category"] or "general"
    
    # Chuáº©n bá»‹ prompt cho LLM
    prompt = f"""
    Vá»›i vai trÃ² lÃ  quáº£n gia Alfred, hÃ£y soáº¡n tháº£o pháº£n há»“i lá»‹ch sá»± sÆ¡ bá»™ cho email nÃ y.
    
    Email:
    Tá»«: {email['sender']}
    Chá»§ Ä‘á»: {email['subject']}
    Ná»™i dung: {email['body']}
    
    Email nÃ y Ä‘Ã£ Ä‘Æ°á»£c phÃ¢n loáº¡i lÃ : {category}
    
    HÃ£y soáº¡n pháº£n há»“i ngáº¯n gá»n, chuyÃªn nghiá»‡p Ä‘á»ƒ Ã´ng Hugg cÃ³ thá»ƒ xem xÃ©t vÃ  cÃ¡ nhÃ¢n hÃ³a trÆ°á»›c khi gá»­i.
    """
    
    # Gá»i LLM
    messages = [HumanMessage(content=prompt)]
    response = model.invoke(messages)
    
    # Cáº­p nháº­t messages Ä‘á»ƒ theo dÃµi
    new_messages = state.get("messages", []) + [
        {"role": "user", "content": prompt},
        {"role": "assistant", "content": response.content}
    ]
    
    # Tráº£ vá» cÃ¡c thay Ä‘á»•i tráº¡ng thÃ¡i
    return {
        "draft_response": response.content,
        "messages": new_messages
    }

def notify_mr_hugg(state: EmailState):
    """Alfred thÃ´ng bÃ¡o cho Ã´ng Hugg vá» email vÃ  trÃ¬nh báº£n nhÃ¡p pháº£n há»“i"""
    email = state["email"]
    
    print("\n" + "="*50)
    print(f"ThÆ°a ngÃ i, ngÃ i cÃ³ email tá»« {email['sender']}.")
    print(f"Chá»§ Ä‘á»: {email['subject']}")
    print(f"PhÃ¢n loáº¡i: {state['email_category']}")
    print("\nTÃ´i Ä‘Ã£ chuáº©n bá»‹ báº£n nhÃ¡p pháº£n há»“i Ä‘á»ƒ ngÃ i xem xÃ©t:")
    print("-"*50)
    print(state["draft_response"])
    print("="*50 + "\n")
    
    # HoÃ n thÃ nh xá»­ lÃ½ email nÃ y
    return {}
```

## BÆ°á»›c 3: Äá»‹nh NghÄ©a Logic Äá»‹nh Tuyáº¿n

Cáº§n má»™t hÃ m Ä‘á»ƒ xÃ¡c Ä‘á»‹nh Ä‘Æ°á»ng Ä‘i tiáº¿p theo sau khi phÃ¢n loáº¡i:

```python
def route_email(state: EmailState) -> str:
    """XÃ¡c Ä‘á»‹nh bÆ°á»›c tiáº¿p theo dá»±a trÃªn phÃ¢n loáº¡i spam"""
    if state["is_spam"]:
        return "spam"
    else:
        return "legitimate"
```

> ğŸ’¡ **LÆ°u Ã½:** HÃ m Ä‘á»‹nh tuyáº¿n nÃ y Ä‘Æ°á»£c LangGraph gá»i Ä‘á»ƒ xÃ¡c Ä‘á»‹nh cáº¡nh nÃ o sáº½ Ä‘i theo sau node phÃ¢n loáº¡i. GiÃ¡ trá»‹ tráº£ vá» pháº£i khá»›p vá»›i má»™t trong cÃ¡c khÃ³a trong Ã¡nh xáº¡ cáº¡nh Ä‘iá»u kiá»‡n.

## BÆ°á»›c 4: Táº¡o StateGraph vÃ  Äá»‹nh NghÄ©a CÃ¡c Cáº¡nh

Giá» ta káº¿t ná»‘i má»i thá»© láº¡i:

```python
# Táº¡o Ä‘á»“ thá»‹
email_graph = StateGraph(EmailState)

# ThÃªm cÃ¡c node
email_graph.add_node("read_email", read_email)
email_graph.add_node("classify_email", classify_email)
email_graph.add_node("handle_spam", handle_spam)
email_graph.add_node("draft_response", draft_response)
email_graph.add_node("notify_mr_hugg", notify_mr_hugg)

# Báº¯t Ä‘áº§u cÃ¡c cáº¡nh
email_graph.add_edge(START, "read_email")
# ThÃªm cáº¡nh - Ä‘á»‹nh nghÄ©a luá»“ng
email_graph.add_edge("read_email", "classify_email")

# ThÃªm nhÃ¡nh Ä‘iá»u kiá»‡n tá»« classify_email
email_graph.add_conditional_edges(
    "classify_email",
    route_email,
    {
        "spam": "handle_spam",
        "legitimate": "draft_response"
    }
)

# ThÃªm cÃ¡c cáº¡nh cuá»‘i
email_graph.add_edge("handle_spam", END)
email_graph.add_edge("draft_response", "notify_mr_hugg")
email_graph.add_edge("notify_mr_hugg", END)

# BiÃªn dá»‹ch Ä‘á»“ thá»‹
compiled_graph = email_graph.compile()
```

LÆ°u Ã½ cÃ¡ch ta sá»­ dá»¥ng node `END` Ä‘áº·c biá»‡t cá»§a LangGraph. ÄÃ¢y chá»‰ cÃ¡c tráº¡ng thÃ¡i káº¿t thÃºc khi quy trÃ¬nh hoÃ n thÃ nh.

## BÆ°á»›c 5: Cháº¡y á»¨ng Dá»¥ng

HÃ£y thá»­ nghiá»‡m Ä‘á»“ thá»‹ vá»›i email há»£p lá»‡ vÃ  email spam:

```python
# Email há»£p lá»‡ máº«u
legitimate_email = {
    "sender": "john.smith@example.com",
    "subject": "Question about your services",
    "body": "Dear Mr. Hugg, I was referred to you by a colleague and I'm interested in learning more about your consulting services. Could we schedule a call next week? Best regards, John Smith"
}

# Email spam máº«u
spam_email = {
    "sender": "winner@lottery-intl.com",
    "subject": "YOU HAVE WON $5,000,000!!!",
    "body": "CONGRATULATIONS! You have been selected as the winner of our international lottery! To claim your $5,000,000 prize, please send us your bank details and a processing fee of $100."
}

# Xá»­ lÃ½ email há»£p lá»‡
print("\nProcessing legitimate email...")
legitimate_result = compiled_graph.invoke({
    "email": legitimate_email,
    "is_spam": None,
    "spam_reason": None,
    "email_category": None,
    "draft_response": None,
    "messages": []
})

# Xá»­ lÃ½ email spam
print("\nProcessing spam email...")
spam_result = compiled_graph.invoke({
    "email": spam_email,
    "is_spam": None,
    "spam_reason": None,
    "email_category": None,
    "draft_response": None,
    "messages": []
})
```

<details>
<summary>Báº¥m Ä‘á»ƒ xem báº£n dá»‹ch tiáº¿ng Viá»‡t</summary>

```python
# Email há»£p lá»‡ máº«u
legitimate_email = {
    "sender": "john.smith@example.com",
    "subject": "CÃ¢u há»i vá» dá»‹ch vá»¥ cá»§a báº¡n",
    "body": "KÃ­nh gá»­i Ã´ng Hugg, tÃ´i Ä‘Æ°á»£c Ä‘á»“ng nghiá»‡p giá»›i thiá»‡u vÃ  muá»‘n tÃ¬m hiá»ƒu thÃªm vá» dá»‹ch vá»¥ tÆ° váº¥n cá»§a Ã´ng. ChÃºng ta cÃ³ thá»ƒ sáº¯p xáº¿p má»™t cuá»™c gá»i vÃ o tuáº§n tá»›i Ä‘Æ°á»£c khÃ´ng? TrÃ¢n trá»ng, John Smith"
}

# Email spam máº«u
spam_email = {
    "sender": "winner@lottery-intl.com",
    "subject": "Báº N ÄÃƒ TRÃšNG 5.000.000$!!!",
    "body": "CHÃšC Má»ªNG! Báº¡n Ä‘Ã£ trÃºng giáº£i xá»• sá»‘ quá»‘c táº¿ cá»§a chÃºng tÃ´i! Äá»ƒ nháº­n giáº£i 5.000.000$, vui lÃ²ng gá»­i thÃ´ng tin ngÃ¢n hÃ ng vÃ  phÃ­ xá»­ lÃ½ 100$."
}

# Xá»­ lÃ½ email há»£p lá»‡
print("\nÄang xá»­ lÃ½ email há»£p lá»‡...")
legitimate_result = compiled_graph.invoke({
    "email": legitimate_email,
    "is_spam": None,
    "spam_reason": None,
    "email_category": None,
    "draft_response": None,
    "messages": []
})

# Xá»­ lÃ½ email spam
print("\nÄang xá»­ lÃ½ email spam...")
spam_result = compiled_graph.invoke({
    "email": spam_email,
    "is_spam": None,
    "spam_reason": None,
    "email_category": None,
    "draft_response": None,
    "messages": []
})
```
</details>

```python
# Example legitimate email
legitimate_email = {
    "sender": "john.smith@example.com",
    "subject": "Question about your services",
    "body": "Dear Mr. Hugg, I was referred to you by a colleague and I'm interested in learning more about your consulting services. Could we schedule a call next week? Best regards, John Smith"
}

# Example spam email
spam_email = {
    "sender": "winner@lottery-intl.com",
    "subject": "YOU HAVE WON $5,000,000!!!",
    "body": "CONGRATULATIONS! You have been selected as the winner of our international lottery! To claim your $5,000,000 prize, please send us your bank details and a processing fee of $100."
}

# Process the legitimate email
print("\nProcessing legitimate email...")
legitimate_result = compiled_graph.invoke({
    "email": legitimate_email,
    "is_spam": None,
    "spam_reason": None,
    "email_category": None,
    "draft_response": None,
    "messages": []
})

# Process the spam email
print("\nProcessing spam email...")
spam_result = compiled_graph.invoke({
    "email": spam_email,
    "is_spam": None,
    "spam_reason": None,
    "email_category": None,
    "draft_response": None,
    "messages": []
})
```

## BÆ°á»›c 6: GiÃ¡m SÃ¡t Agent PhÃ¢n Loáº¡i ThÆ° Vá»›i Langfuse ğŸ“¡

Khi Alfred tinh chá»‰nh (fine-tuning) Agent PhÃ¢n Loáº¡i ThÆ°, anh áº¥y Ä‘ang gáº·p khÃ³ khÄƒn trong viá»‡c gá»¡ lá»—i cÃ¡c láº§n cháº¡y. Báº£n cháº¥t cá»§a Agents lÃ  khÃ³ dá»± Ä‘oÃ¡n vÃ  kiá»ƒm tra. NhÆ°ng vÃ¬ má»¥c tiÃªu xÃ¢y dá»±ng Agent PhÃ¡t Hiá»‡n Spam tá»‘i Æ°u vÃ  triá»ƒn khai production, anh áº¥y cáº§n kháº£ nÄƒng theo dÃµi máº¡nh máº½ cho giÃ¡m sÃ¡t vÃ  phÃ¢n tÃ­ch sau nÃ y.

Äá»ƒ lÃ m Ä‘iá»u nÃ y, Alfred cÃ³ thá»ƒ sá»­ dá»¥ng cÃ´ng cá»¥ quan sÃ¡t nhÆ° [Langfuse](https://langfuse.com/) Ä‘á»ƒ theo dÃµi vÃ  giÃ¡m sÃ¡t agent.

Äáº§u tiÃªn, cÃ i Ä‘áº·t Langfuse:  
```python
%pip install -q langfuse
```

ThÃªm API keys vÃ  Ä‘á»‹a chá»‰ host cá»§a Langfuse vÃ o biáº¿n mÃ´i trÆ°á»ng. Báº¡n cÃ³ thá»ƒ láº¥y credentials Langfuse báº±ng cÃ¡ch Ä‘Äƒng kÃ½ [Langfuse Cloud](https://cloud.langfuse.com) hoáº·c [self-host Langfuse](https://langfuse.com/self-hosting). 

```python
import os
 
# Láº¥y keys tá»« trang cÃ i Ä‘áº·t dá»± Ã¡n: https://cloud.langfuse.com
os.environ["LANGFUSE_PUBLIC_KEY"] = "pk-lf-..." 
os.environ["LANGFUSE_SECRET_KEY"] = "sk-lf-..."
os.environ["LANGFUSE_HOST"] = "https://cloud.langfuse.com" # ğŸ‡ªğŸ‡º Khu vá»±c EU
# os.environ["LANGFUSE_HOST"] = "https://us.cloud.langfuse.com" # ğŸ‡ºğŸ‡¸ Khu vá»±c US
```

Sau Ä‘Ã³ cáº¥u hÃ¬nh [Langfuse `callback_handler`](https://langfuse.com/docs/integrations/langchain/tracing#add-langfuse-to-your-langchain-application) vÃ  tÃ­ch há»£p agent báº±ng cÃ¡ch thÃªm `langfuse_callback` vÃ o lá»‡nh gá»i Ä‘á»“ thá»‹: `config={"callbacks": [langfuse_handler]}`.

```python   
from langfuse.callback import CallbackHandler

# Khá»Ÿi táº¡o Langfuse CallbackHandler cho LangGraph/Langchain (tracing)
langfuse_handler = CallbackHandler()

# Xá»­ lÃ½ email há»£p lá»‡
legitimate_result = compiled_graph.invoke(
    input={"email": legitimate_email, "is_spam": None, "spam_reason": None, "email_category": None, "draft_response": None, "messages": []},
    config={"callbacks": [langfuse_handler]}
)
```

Alfred Ä‘Ã£ káº¿t ná»‘i thÃ nh cÃ´ng ğŸ”Œ! CÃ¡c láº§n cháº¡y tá»« LangGraph Ä‘ang Ä‘Æ°á»£c ghi nháº­n vÃ o Langfuse, cho phÃ©p anh áº¥y quan sÃ¡t toÃ n bá»™ hÃ nh vi cá»§a agent. Vá»›i thiáº¿t láº­p nÃ y, anh áº¥y cÃ³ thá»ƒ xem láº¡i cÃ¡c láº§n cháº¡y trÆ°á»›c vÃ  cáº£i thiá»‡n Agent PhÃ¢n Loáº¡i ThÆ°.  

![VÃ­ dá»¥ trace trong Langfuse](https://langfuse.com/images/cookbook/huggingface-agent-course/langgraph-trace-legit.png)

_[LiÃªn káº¿t cÃ´ng khai Ä‘áº¿n trace vá»›i email há»£p lá»‡](https://cloud.langfuse.com/project/cloramnkj0002jz088vzn1ja4/traces/f5d6d72e-20af-4357-b232-af44c3728a7b?timestamp=2025-03-17T10%3A13%3A28.413Z&observation=6997ba69-043f-4f77-9445-700a033afba1)_

## Trá»±c Quan HÃ³a Äá»“ Thá»‹

LangGraph cho phÃ©p ta trá»±c quan hÃ³a quy trÃ¬nh lÃ m viá»‡c Ä‘á»ƒ hiá»ƒu vÃ  gá»¡ lá»—i cáº¥u trÃºc tá»‘t hÆ¡n:

```python
compiled_graph.get_graph().draw_mermaid_png()
```
<img src="https://huggingface.co/datasets/agents-course/course-images/resolve/main/en/unit2/LangGraph/mail_flow.png" alt="Mail LangGraph"/>

Äiá»u nÃ y táº¡o ra biá»ƒu diá»…n trá»±c quan cho tháº¥y cÃ¡ch cÃ¡c node Ä‘Æ°á»£c káº¿t ná»‘i vÃ  cÃ¡c Ä‘Æ°á»ng Ä‘i cÃ³ Ä‘iá»u kiá»‡n.

## ThÃ nh Quáº£ Äáº¡t ÄÆ°á»£c

Ta Ä‘Ã£ táº¡o ra má»™t quy trÃ¬nh xá»­ lÃ½ email hoÃ n chá»‰nh:

1. Nháº­n email Ä‘áº¿n
2. Sá»­ dá»¥ng LLM Ä‘á»ƒ phÃ¢n loáº¡i spam/há»£p lá»‡
3. Xá»­ lÃ½ spam báº±ng cÃ¡ch loáº¡i bá»
4. Vá»›i email há»£p lá»‡, soáº¡n pháº£n há»“i vÃ  thÃ´ng bÃ¡o cho Ã´ng Hugg

Äiá»u nÃ y minh há»a sá»©c máº¡nh cá»§a LangGraph trong viá»‡c Ä‘iá»u phá»‘i cÃ¡c quy trÃ¬nh phá»©c táº¡p vá»›i LLM trong khi duy trÃ¬ luá»“ng lÃ m viá»‡c rÃµ rÃ ng.

## Äiá»ƒm Quan Trá»ng

- **Quáº£n LÃ½ Tráº¡ng ThÃ¡i**: Ta Ä‘Ã£ Ä‘á»‹nh nghÄ©a tráº¡ng thÃ¡i toÃ n diá»‡n Ä‘á»ƒ theo dÃµi má»i khÃ­a cáº¡nh xá»­ lÃ½ email
- **Triá»ƒn Khai Node**: Ta Ä‘Ã£ táº¡o cÃ¡c node chá»©c nÄƒng tÆ°Æ¡ng tÃ¡c vá»›i LLM
- **Äá»‹nh Tuyáº¿n CÃ³ Äiá»u Kiá»‡n**: Ta Ä‘Ã£ triá»ƒn khai logic phÃ¢n nhÃ¡nh dá»±a trÃªn phÃ¢n loáº¡i email
- **Tráº¡ng ThÃ¡i Káº¿t ThÃºc**: Ta Ä‘Ã£ sá»­ dá»¥ng node END Ä‘á»ƒ Ä‘Ã¡nh dáº¥u Ä‘iá»ƒm hoÃ n thÃ nh quy trÃ¬nh

## BÆ°á»›c Tiáº¿p Theo?

Trong pháº§n tiáº¿p theo, ta sáº½ khÃ¡m phÃ¡ cÃ¡c tÃ­nh nÄƒng nÃ¢ng cao cá»§a LangGraph, bao gá»“m xá»­ lÃ½ tÆ°Æ¡ng tÃ¡c con ngÆ°á»i trong quy trÃ¬nh vÃ  triá»ƒn khai logic phÃ¢n nhÃ¡nh phá»©c táº¡p dá»±a trÃªn nhiá»u Ä‘iá»u kiá»‡n.