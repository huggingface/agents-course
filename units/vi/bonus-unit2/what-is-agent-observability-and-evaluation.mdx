# Kháº£ nÄƒng Quan sÃ¡t vÃ  ÄÃ¡nh giÃ¡ AI Agent

## ğŸ” Kháº£ nÄƒng Quan sÃ¡t lÃ  gÃ¬?

Observability (kháº£ nÄƒng quan sÃ¡t) lÃ  kháº£ nÄƒng hiá»ƒu Ä‘Æ°á»£c nhá»¯ng gÃ¬ Ä‘ang xáº£y ra bÃªn trong AI agent cá»§a báº¡n báº±ng cÃ¡ch xem xÃ©t cÃ¡c tÃ­n hiá»‡u bÃªn ngoÃ i nhÆ° logs, metrics vÃ  traces. Äá»‘i vá»›i AI agent, Ä‘iá»u nÃ y cÃ³ nghÄ©a lÃ  theo dÃµi cÃ¡c hÃ nh Ä‘á»™ng, cÃ¡ch sá»­ dá»¥ng cÃ´ng cá»¥, lá»‡nh gá»i mÃ´ hÃ¬nh vÃ  pháº£n há»“i Ä‘á»ƒ gá»¡ lá»—i vÃ  cáº£i thiá»‡n hiá»‡u suáº¥t cá»§a agent.

![Observability dashboard](https://huggingface.co/datasets/agents-course/course-images/resolve/main/en/bonus-unit2/langfuse-dashboard.png)

## ğŸ”­ Táº¡i sao Quan sÃ¡t Agent láº¡i quan trá»ng

Náº¿u khÃ´ng cÃ³ observability, AI agent sáº½ lÃ  nhá»¯ng "há»™p Ä‘en". CÃ¡c cÃ´ng cá»¥ observability giÃºp agent trá»Ÿ nÃªn minh báº¡ch, cho phÃ©p báº¡n:

- Hiá»ƒu Ä‘Æ°á»£c sá»± Ä‘Ã¡nh Ä‘á»•i giá»¯a chi phÃ­ vÃ  Ä‘á»™ chÃ­nh xÃ¡c
- Äo Ä‘á»™ trá»…
- PhÃ¡t hiá»‡n ngÃ´n ngá»¯ Ä‘á»™c háº¡i & prompt injection
- Theo dÃµi pháº£n há»“i tá»« ngÆ°á»i dÃ¹ng

NÃ³i cÃ¡ch khÃ¡c, nÃ³ biáº¿n agent demo cá»§a báº¡n thÃ nh sáº£n pháº©m sáºµn sÃ ng cho production!

## ğŸ”¨ CÃ´ng cá»¥ Quan sÃ¡t

CÃ¡c cÃ´ng cá»¥ quan sÃ¡t phá»• biáº¿n cho AI agent bao gá»“m cÃ¡c ná»n táº£ng nhÆ° [Langfuse](https://langfuse.com) vÃ  [Arize](https://www.arize.com). Nhá»¯ng cÃ´ng cá»¥ nÃ y giÃºp thu tháº­p traces chi tiáº¿t vÃ  cung cáº¥p dashboard Ä‘á»ƒ theo dÃµi metrics theo thá»i gian thá»±c, giÃºp phÃ¡t hiá»‡n váº¥n Ä‘á» vÃ  tá»‘i Æ°u hiá»‡u suáº¥t dá»… dÃ ng.

CÃ¡c cÃ´ng cá»¥ quan sÃ¡t cÃ³ tÃ­nh nÄƒng vÃ  kháº£ nÄƒng ráº¥t Ä‘a dáº¡ng. Má»™t sá»‘ cÃ´ng cá»¥ lÃ  mÃ£ nguá»“n má»Ÿ, Ä‘Æ°á»£c hÆ°á»Ÿng lá»£i tá»« cá»™ng Ä‘á»“ng lá»›n giÃºp Ä‘á»‹nh hÃ¬nh lá»™ trÃ¬nh phÃ¡t triá»ƒn vÃ  tÃ­ch há»£p má»Ÿ rá»™ng. NgoÃ i ra, má»™t sá»‘ cÃ´ng cá»¥ chuyÃªn vá» cÃ¡c khÃ­a cáº¡nh cá»¥ thá»ƒ cá»§a LLMOps - nhÆ° kháº£ nÄƒng quan sÃ¡t, Ä‘Ã¡nh giÃ¡ hoáº·c quáº£n lÃ½ prompt - trong khi sá»‘ khÃ¡c Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ bao quÃ¡t toÃ n bá»™ quy trÃ¬nh LLMOps. ChÃºng mÃ¬nh khuyáº¿n khÃ­ch báº¡n khÃ¡m phÃ¡ tÃ i liá»‡u cá»§a cÃ¡c lá»±a chá»n khÃ¡c nhau Ä‘á»ƒ chá»n giáº£i phÃ¡p phÃ¹ há»£p.

Nhiá»u framework agent nhÆ° [smolagents](https://huggingface.co/docs/smolagents/v1.12.0/en/index) sá»­ dá»¥ng chuáº©n [OpenTelemetry](https://opentelemetry.io/docs/) Ä‘á»ƒ xuáº¥t metadata cho cÃ¡c cÃ´ng cá»¥ observability. BÃªn cáº¡nh Ä‘Ã³, cÃ¡c cÃ´ng cá»¥ observability xÃ¢y dá»±ng instrumentation tÃ¹y chá»‰nh Ä‘á»ƒ linh hoáº¡t hÆ¡n trong tháº¿ giá»›i LLM Ä‘ang phÃ¡t triá»ƒn nhanh. Báº¡n nÃªn kiá»ƒm tra tÃ i liá»‡u cá»§a cÃ´ng cá»¥ Ä‘ang dÃ¹ng Ä‘á»ƒ xem nhá»¯ng gÃ¬ Ä‘Æ°á»£c há»— trá»£.

## ğŸ”¬Traces vÃ  Spans

CÃ¡c cÃ´ng cá»¥ quan sÃ¡t thÆ°á»ng biá»ƒu diá»…n quÃ¡ trÃ¬nh cháº¡y agent dÆ°á»›i dáº¡ng traces vÃ  spans.

- **Traces** Ä‘áº¡i diá»‡n cho má»™t tÃ¡c vá»¥ agent hoÃ n chá»‰nh tá»« Ä‘áº§u Ä‘áº¿n cuá»‘i (nhÆ° xá»­ lÃ½ truy váº¥n ngÆ°á»i dÃ¹ng).
- **Spans** lÃ  cÃ¡c bÆ°á»›c riÃªng láº» trong trace (nhÆ° gá»i language mÃ´ hÃ¬nh hoáº·c truy xuáº¥t dá»¯ liá»‡u).

![Example of a smolagent trace in Langfuse](https://huggingface.co/datasets/agents-course/course-images/resolve/main/en/bonus-unit2/trace-tree.png)

## ğŸ“Š CÃ¡c Metrics ChÃ­nh Cáº§n Theo DÃµi

DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ metrics phá»• biáº¿n nháº¥t mÃ  cÃ¡c cÃ´ng cá»¥ quan sÃ¡t theo dÃµi:

**Äá»™ trá»… (Latency):** Agent pháº£n há»“i nhanh tháº¿ nÃ o? Thá»i gian chá» lÃ¢u áº£nh hÆ°á»Ÿng tiÃªu cá»±c Ä‘áº¿n tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng. Báº¡n nÃªn Ä‘o Ä‘á»™ trá»… cho cÃ¡c tÃ¡c vá»¥ vÃ  tá»«ng bÆ°á»›c báº±ng cÃ¡ch trace quÃ¡ trÃ¬nh cháº¡y agent. VÃ­ dá»¥: agent máº¥t 20 giÃ¢y cho táº¥t cáº£ lá»‡nh gá»i mÃ´ hÃ¬nh cÃ³ thá»ƒ Ä‘Æ°á»£c tÄƒng tá»‘c báº±ng cÃ¡ch dÃ¹ng mÃ´ hÃ¬nh nhanh hÆ¡n hoáº·c cháº¡y cÃ¡c lá»‡nh gá»i song song.

**Chi phÃ­ (Costs):** Chi phÃ­ cho má»—i