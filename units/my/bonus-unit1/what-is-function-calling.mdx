# Function Calling ဆိုတာ ဘာလဲ။

**Function-calling** ဆိုတာဟာ **LLM (Large Language Model) တစ်ခုက သူ့ရဲ့ ပတ်ဝန်းကျင်မှာ လုပ်ဆောင်ချက်တွေ လုပ်နိုင်ဖို့အတွက် အသုံးပြုတဲ့ နည်းလမ်းတစ်ခု** ဖြစ်ပါတယ်။ ဒီနည်းလမ်းကို ပထမဆုံးအနေနဲ့ [GPT-4 မှာ မိတ်ဆက်ခဲ့ပြီး](https://openai.com/index/function-calling-and-other-api-updates/)၊ နောက်ပိုင်းမှာ တခြားသော မော်ဒယ်တွေမှာပါ ထည့်သွင်းလာကြပါတယ်။

Agent တစ်ခုရဲ့ Tool တွေလိုပဲ၊ Function-calling ဟာလည်း မော်ဒယ်ကို **သူ့ပတ်ဝန်းကျင်မှာ လုပ်ဆောင်ချက်တစ်ခု လုပ်နိုင်တဲ့ စွမ်းရည်** ကို ပေးပါတယ်။ ဒါပေမဲ့၊ Function-calling စွမ်းရည်ကို **မော်ဒယ်ကိုယ်တိုင်က သင်ယူထားတာ** ဖြစ်ပြီး၊ တခြား Agent နည်းစနစ်တွေထက် **Prompting (ညွှန်ကြားချက်ပေးခြင်း) အပေါ် မှီခိုမှု နည်းပါးပါတယ်**။

Unit 1 မှာတုန်းက Agent ဟာ **Tool တွေကို ဘယ်လိုသုံးရမယ်ဆိုတာ သင်ယူခဲ့တာ မဟုတ်ပါဘူး**။ ကျွန်တော်တို့က Tool စာရင်းကို ပေးလိုက်ရုံပါပဲ။ မော်ဒယ်က ဒီ Tool တွေကို အသုံးပြုပြီး **အစီအစဉ်တစ်ခုကို ချမှတ်နိုင်တဲ့ ယေဘုယျစွမ်းရည် (Generalize)** အပေါ်မှာပဲ ကျွန်တော်တို့ မှီခိုခဲ့ရပါတယ်။

ဒီနေရာမှာတော့ **Function-calling နဲ့ဆိုရင် Agent ဟာ Tool တွေကို ဘယ်လိုသုံးရမယ်ဆိုတာကို Fine-tuning (လေ့ကျင့်ပေးခြင်း) လုပ်ထားတာ** ဖြစ်ပါတယ်။

## မော်ဒယ်က လုပ်ဆောင်ချက်ကို ဘယ်လို "သင်ယူ" သလဲ။

Unit 1 မှာတုန်းက Agent တစ်ခုရဲ့ အလုပ်လုပ်ပုံ အဆင့်ဆင့်ကို လေ့လာခဲ့ပြီးပါပြီ။ အသုံးပြုသူက Agent ကို Tool တွေ ပေးပြီး မေးခွန်းတစ်ခု မေးလိုက်တဲ့အခါ၊ မော်ဒယ်ဟာ အောက်ပါ အဆင့်တွေကို လည်ပတ်လုပ်ဆောင်ပါတယ်-

1.  ***စဉ်းစားခြင်း (Think)***: ရည်မှန်းချက်ကို ပြီးမြောက်ဖို့အတွက် ဘယ်လို လုပ်ဆောင်ချက် (Action) တွေ လုပ်ဖို့ လိုအပ်သလဲ။
2.  ***လုပ်ဆောင်ခြင်း (Act)***: မှန်ကန်တဲ့ Parameter တွေနဲ့ Action ကို ပုံစံချပြီး Token ထုတ်ပေးခြင်းကို ရပ်တန့်လိုက်တယ်။
3.  ***လေ့လာစောင့်ကြည့်ခြင်း (Observe)***: လုပ်ဆောင်ချက် ပြီးမြောက်ပြီးနောက် ရလဒ်ကို ပြန်လည်ရယူတယ်။

API မှတစ်ဆင့် မော်ဒယ်တစ်ခုနဲ့ "ပုံမှန်" စကားပြောဆိုတဲ့အခါ၊ စကားဝိုင်းဟာ အသုံးပြုသူ (User) နဲ့ လက်ထောက် (Assistant) ရဲ့ Message တွေအကြား အောက်ပါအတိုင်း အလှည့်ကျ ဖလှယ်လေ့ရှိပါတယ်-

```python
conversation = [
    {"role": "user", "content": "ကျွန်တော့်ရဲ့ အော်ဒါနဲ့ပတ်သက်ပြီး အကူအညီလိုပါတယ်။"},
    {"role": "assistant", "content": "ကူညီပေးဖို့ ဝမ်းသာပါတယ်။ အော်ဒါနံပါတ်လေး ပေးနိုင်မလားခင်ဗျာ။"},
    {"role": "user", "content": "ORDER-123 ပါ။"},
]
```

Function-calling ကတော့ **စကားဝိုင်းထဲကို Role အသစ်တွေ** ယူဆောင်လာပါတယ်။

1.  **လုပ်ဆောင်ချက် (Action)** အတွက် Role အသစ်တစ်ခု
2.  **လေ့လာစောင့်ကြည့်မှု (Observation)** အတွက် Role အသစ်တစ်ခု

[Mistral API](https://docs.mistral.ai/capabilities/function_calling/) ကို ဥပမာအနေနဲ့ ကြည့်မယ်ဆိုရင် အောက်ပါအတိုင်း တွေ့ရပါမယ်-

```python
conversation = [
    {
        "role": "user",
        "content": "ကျွန်တော့်ရဲ့ ငွေပေးချေမှု T1001 ရဲ့ အခြေအနေက ဘာလဲ။"
    },
    {
        "role": "assistant",
        "content": "",
        "function_call": {
            "name": "retrieve_payment_status", # Tool ကို ခေါ်ဆိုခြင်း (Action)
            "arguments": "{\"transaction_id\": \"T1001\"}"
        }
    },
    {
        "role": "tool", # Tool မှ ပြန်လာသော ရလဒ် (Observation)
        "name": "retrieve_payment_status",
        "content": "{\"status\": \"Paid\"}"
    },
    {
        "role": "assistant",
        "content": "သင့်ရဲ့ ငွေပေးချေမှု T1001 ကို အောင်မြင်စွာ ပေးချေပြီးပါပြီ။"
    }
]
```

> ... ဒါပေမဲ့ Function Calls တွေအတွက် Role အသစ်ရှိတယ်လို့ ပြောခဲ့တာ မဟုတ်ဘူးလား?

**ဟုတ်လည်း ဟုတ်တယ်၊ မဟုတ်လည်း မဟုတ်ပါဘူး။** ဒီဥပမာနဲ့ တခြား API အများစုမှာ၊ မော်ဒယ်က လုပ်ဆောင်ရမယ့် Action ကို "assistant" Message ပုံစံနဲ့ ပုံစံချပါတယ်။ Chat Template ကတော့ Function-calling အတွက် **အထူး Token များ** အဖြစ် ဒါကို ကိုယ်စားပြုပါတယ်။

*   `[AVAILABLE_TOOLS]` – ရရှိနိုင်သော Tool များ စာရင်း စတင်ခြင်း
*   `[/AVAILABLE_TOOLS]` – ရရှိနိုင်သော Tool များ စာရင်း ပြီးဆုံးခြင်း
*   `[TOOL_CALLS]` – Tool တစ်ခုကို ခေါ်ဆိုခြင်း (ဆိုလိုသည်မှာ "Action" ယူခြင်း)
*   `[TOOL_RESULTS]` – Action ၏ ရလဒ်ကို "လေ့လာစောင့်ကြည့်ခြင်း"
*   `[/TOOL_RESULTS]` – လေ့လာစောင့်ကြည့်မှု ပြီးဆုံးခြင်း (ဆိုလိုသည်မှာ မော်ဒယ်က စာသားကို ပြန်လည်ထုတ်ပေးနိုင်ပြီ)

**နောက်ထပ် သိထားသင့်တဲ့ အချက်:** Function-calling ဟာ မော်ဒယ်ကို Tool တွေရဲ့ **Schema (ဖွဲ့စည်းပုံ)** ကို ပေးလိုက်ရုံနဲ့၊ ဘယ်အချိန်မှာ ဘယ် Tool ကို သုံးရမယ်ဆိုတာကို **သူ့ဘာသာသူ ဆုံးဖြတ်နိုင်အောင်** လေ့ကျင့်ပေးထားတာ ဖြစ်ပါတယ်။ ဒါကြောင့် Prompt ထဲမှာ ရှည်လျားတဲ့ ညွှန်ကြားချက်တွေ ထည့်ပေးစရာ မလိုတော့ဘဲ ပိုမိုထိရောက်ပါတယ်။

ဒီ Course မှာ Function-calling အကြောင်းကို ထပ်မံ ဆွေးနွေးသွားမှာ ဖြစ်ပေမယ့်၊ ပိုမိုနက်ရှိုင်းစွာ လေ့လာချင်တယ်ဆိုရင် [ဒီအလွန်ကောင်းမွန်တဲ့ Documentation အပိုင်းကို](https://docs.mistral.ai/capabilities/function_calling/) ကြည့်ရှုနိုင်ပါတယ်။

---

Function-calling ဆိုတာ ဘာလဲ၊ ဘယ်လို အလုပ်လုပ်တယ်ဆိုတာကို သိရှိပြီးတဲ့နောက်မှာ၊ **Function-calling စွမ်းရည် မရှိသေးတဲ့ မော်ဒယ်တစ်ခုကို အဲဒီစွမ်းရည်တွေ ထည့်သွင်းပေးဖို့** လုပ်ဆောင်သွားပါမယ်။ ဥပမာအနေနဲ့ [google/gemma-2-2b-it](https://huggingface.co/google/gemma-2-2b-it) ကို အထူး Token အသစ်တွေ ထည့်သွင်းပြီး လုပ်ဆောင်ပါမယ်။

ဒီလိုလုပ်နိုင်ဖို့အတွက်၊ **ကျွန်တော်တို့ အရင်ဆုံး Fine-tuning နဲ့ LoRA အကြောင်းကို နားလည်ဖို့ လိုအပ်ပါတယ်**။