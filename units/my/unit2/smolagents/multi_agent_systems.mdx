<CourseFloatingBanner
  classNames="absolute z-10 right-0 top-0"
  notebooks={[
    {label: "Google Colab", value: "https://colab.research.google.com/#fileId=https://huggingface.co/agents-course/notebooks/blob/main/unit2/smolagents/multiagent_notebook.ipynb"},
]}
askForHelpUrl="http://hf.co/join/discord" />

## Multi-Agent á€…á€”á€…á€ºá€™á€»á€¬á€¸ (Multi-Agent Systems)

Multi-Agent á€…á€”á€…á€ºá€™á€»á€¬á€¸á€†á€­á€¯á€á€¬á€Ÿá€¬ **á€¡á€‘á€°á€¸á€•á€¼á€¯ Agent á€á€½á€±á€€ á€›á€¾á€¯á€•á€ºá€‘á€½á€±á€¸á€á€²á€· á€œá€¯á€•á€ºá€„á€”á€ºá€¸á€á€½á€±á€€á€­á€¯ á€•á€°á€¸á€•á€±á€«á€„á€ºá€¸á€œá€¯á€•á€ºá€†á€±á€¬á€„á€ºá€”á€­á€¯á€„á€ºá€–á€­á€¯á€·** á€…á€®á€…á€‰á€ºá€•á€±á€¸á€á€²á€· á€”á€Šá€ºá€¸á€œá€™á€ºá€¸á€•á€² á€–á€¼á€…á€ºá€•á€«á€á€šá€ºá‹ á€’á€®á€…á€”á€…á€ºá€á€½á€±á€€ á€…á€”á€…á€ºá€›á€²á€· á€–á€½á€²á€·á€…á€Šá€ºá€¸á€•á€¯á€¶á€€á€­á€¯ á€•á€­á€¯á€™á€­á€¯á€…á€”á€…á€ºá€€á€»á€…á€±á€á€¼á€„á€ºá€¸ (Modularity)áŠ á€á€»á€²á€·á€‘á€½á€„á€ºá€”á€­á€¯á€„á€ºá€…á€½á€™á€ºá€¸ (Scalability) á€”á€²á€· á€á€¶á€”á€­á€¯á€„á€ºá€›á€Šá€ºá€›á€¾á€­á€™á€¾á€¯ (Robustness) á€á€½á€±á€€á€­á€¯ á€á€­á€¯á€¸á€á€€á€ºá€…á€±á€•á€«á€á€šá€ºá‹ Agent á€á€…á€ºá€á€¯á€á€Šá€ºá€¸á€€á€­á€¯ á€¡á€¬á€¸á€€á€­á€¯á€¸á€™á€šá€·á€ºá€¡á€…á€¬á€¸áŠ á€œá€¯á€•á€ºá€„á€”á€ºá€¸á€á€½á€±á€€á€­á€¯ á€™á€á€°á€Šá€®á€á€²á€· á€…á€½á€™á€ºá€¸á€†á€±á€¬á€„á€ºá€›á€Šá€ºá€›á€¾á€­á€á€²á€· Agent á€á€½á€±á€€á€¼á€¬á€¸á€™á€¾á€¬ á€á€½á€²á€á€±á€•á€±á€¸á€œá€­á€¯á€€á€ºá€á€¬ á€–á€¼á€…á€ºá€•á€«á€á€šá€ºá‹

**smolagents** Framework á€™á€¾á€¬á€†á€­á€¯á€›á€„á€ºáŠ á€™á€á€°á€Šá€®á€á€²á€· Agent á€á€½á€±á€€á€­á€¯ á€•á€±á€«á€„á€ºá€¸á€…á€•á€ºá€•á€¼á€®á€¸ Python Code á€á€½á€± á€‘á€¯á€á€ºá€•á€±á€¸á€á€¬áŠ á€•á€¼á€„á€ºá€• Tool á€á€½á€±á€€á€­á€¯ á€á€±á€«á€ºá€†á€­á€¯á€á€¬áŠ á€á€€á€ºá€˜á€ºá€›á€¾á€¬á€–á€½á€±á€™á€¾á€¯á€á€½á€± á€œá€¯á€•á€ºá€†á€±á€¬á€„á€ºá€á€¬ á€…á€á€²á€· á€œá€¯á€•á€ºá€„á€”á€ºá€¸á€á€½á€±á€€á€­á€¯ á€œá€¯á€•á€ºá€†á€±á€¬á€„á€ºá€”á€­á€¯á€„á€ºá€•á€«á€á€šá€ºá‹ á€’á€® Agent á€á€½á€±á€€á€­á€¯ á€…á€”á€…á€ºá€á€€á€» á€…á€®á€™á€¶á€á€”á€·á€ºá€á€½á€²á€á€¼á€„á€ºá€¸á€¡á€¬á€¸á€–á€¼á€„á€·á€º á€€á€»á€½á€”á€ºá€á€±á€¬á€ºá€á€­á€¯á€·á€Ÿá€¬ á€¡á€…á€½á€™á€ºá€¸á€‘á€€á€ºá€á€²á€· á€œá€¯á€•á€ºá€„á€”á€ºá€¸á€¡á€†á€„á€·á€ºá€†á€„á€·á€º (Workflows) á€á€½á€±á€€á€­á€¯ á€–á€”á€ºá€á€®á€¸á€”á€­á€¯á€„á€ºá€•á€«á€á€šá€ºá‹

á€•á€¯á€¶á€™á€¾á€”á€ºá€¡á€¬á€¸á€–á€¼á€„á€·á€º Multi-Agent á€…á€”á€…á€ºá€á€…á€ºá€á€¯á€™á€¾á€¬ á€¡á€±á€¬á€€á€ºá€•á€« Agent á€á€½á€± á€•á€«á€á€„á€ºá€”á€­á€¯á€„á€ºá€•á€«á€á€šá€ºá‹

*   **Manager Agent:** á€œá€¯á€•á€ºá€„á€”á€ºá€¸á€á€½á€²á€á€½á€±á€€á€­á€¯ á€á€¬á€á€”á€ºá€á€½á€²á€á€±á€•á€±á€¸á€–á€­á€¯á€·á€¡á€á€½á€€á€ºá‹
*   **Code Interpreter Agent:** Code á€á€½á€±á€€á€­á€¯ á€œá€¯á€•á€ºá€†á€±á€¬á€„á€ºá€•á€±á€¸á€–á€­á€¯á€·á€¡á€á€½á€€á€ºá‹
*   **Web Search Agent:** á€¡á€á€»á€€á€ºá€¡á€œá€€á€º á€›á€¾á€¬á€–á€½á€±á€–á€­á€¯á€·á€¡á€á€½á€€á€ºá‹

á€¡á€±á€¬á€€á€ºá€•á€« á€•á€¯á€¶á€€á€¼á€™á€ºá€¸á€€ á€›á€­á€¯á€¸á€›á€¾á€„á€ºá€¸á€á€²á€· Multi-Agent á€–á€½á€²á€·á€…á€Šá€ºá€¸á€•á€¯á€¶á€€á€­á€¯ á€–á€±á€¬á€ºá€•á€¼á€‘á€¬á€¸á€•á€«á€á€šá€ºá‹ **Manager Agent** á€€ **Code Interpreter Tool** á€”á€²á€· **Web Search Agent** á€€á€­á€¯ á€…á€®á€™á€¶á€á€”á€·á€ºá€á€½á€²á€•á€«á€á€šá€ºá‹ Web Search Agent á€€á€á€±á€¬á€· á€á€€á€ºá€†á€­á€¯á€„á€ºá€›á€¬ á€¡á€á€»á€€á€ºá€¡á€œá€€á€ºá€á€½á€± á€…á€¯á€†á€±á€¬á€„á€ºá€¸á€–á€­á€¯á€·á€¡á€á€½á€€á€º `DuckDuckGoSearchTool` á€”á€²á€· `VisitWebpageTool` á€œá€­á€¯á€™á€»á€­á€¯á€¸ Tool á€á€½á€±á€€á€­á€¯ á€¡á€á€¯á€¶á€¸á€•á€¼á€¯á€•á€«á€á€šá€ºá‹

<img src="https://mermaid.ink/img/pako:eNp1kc1qhTAQRl9FUiQb8wIpdNO76eKubrmFks1oRg3VSYgjpYjv3lFL_2hnMWQOJwn5sqgmelRWleUSKLAtFs09jqhtoWuYUFfFAa6QA9QDTnpzamheuhxn5pt40-6l13UtS0ddhtQXj6dbR4XUGQg6zEYasTF393KjeSDGnDJKNxzj8I_7hLW5IOSmP9CH9hv_NL-d94d4DVNg84p1EnK4qlIj5hGClySWbadT-6OdsrL02MI8sFOOVkciw8zx8kaNspxnrJQE0fXKtjBMMs3JA-MpgOQwftIE9Bzj14w-cMznI_39E9Z3p0uFoA?type=png" style='background: white;'>

## á€œá€€á€ºá€á€½á€±á€·á€œá€¯á€•á€ºá€†á€±á€¬á€„á€ºá€”á€±á€á€±á€¬ Multi-Agent á€…á€”á€…á€ºá€™á€»á€¬á€¸ (Multi-Agent Systems in Action)

Multi-Agent á€…á€”á€…á€ºá€á€…á€ºá€á€¯á€Ÿá€¬ **Orchestrator Agent** á€›á€²á€· á€…á€®á€™á€¶á€á€”á€·á€ºá€á€½á€²á€™á€¾á€¯á€¡á€±á€¬á€€á€ºá€™á€¾á€¬ á€¡á€‘á€°á€¸á€•á€¼á€¯ Agent á€¡á€™á€»á€¬á€¸á€¡á€•á€¼á€¬á€¸ á€•á€°á€¸á€•á€±á€«á€„á€ºá€¸á€œá€¯á€•á€ºá€†á€±á€¬á€„á€ºá€”á€±á€á€²á€· á€…á€”á€…á€ºá€á€…á€ºá€á€¯ á€–á€¼á€…á€ºá€•á€«á€á€šá€ºá‹ á€’á€®á€”á€Šá€ºá€¸á€œá€™á€ºá€¸á€€ á€œá€¯á€•á€ºá€„á€”á€ºá€¸á€á€½á€²á€á€½á€±á€€á€­á€¯ á€™á€á€°á€Šá€®á€á€²á€· á€á€¬á€á€”á€ºá€›á€¾á€­á€á€²á€· Agent á€á€½á€±á€€á€¼á€¬á€¸á€™á€¾á€¬ á€á€½á€²á€á€±á€•á€±á€¸á€á€¼á€„á€ºá€¸á€¡á€¬á€¸á€–á€¼á€„á€·á€º á€›á€¾á€¯á€•á€ºá€‘á€½á€±á€¸á€á€²á€· á€œá€¯á€•á€ºá€„á€”á€ºá€¸á€¡á€†á€„á€·á€ºá€†á€„á€·á€ºá€á€½á€±á€€á€­á€¯ á€œá€¯á€•á€ºá€†á€±á€¬á€„á€ºá€”á€­á€¯á€„á€ºá€…á€±á€•á€«á€á€šá€ºá‹

á€¥á€•á€™á€¬á€¡á€¬á€¸á€–á€¼á€„á€·á€ºáŠ **Multi-Agent RAG (Retrieval-Augmented Generation) á€…á€”á€…á€º** á€á€…á€ºá€á€¯á€™á€¾á€¬ á€¡á€±á€¬á€€á€ºá€•á€« Agent á€á€½á€±á€€á€­á€¯ á€•á€±á€«á€„á€ºá€¸á€…á€•á€ºá€”á€­á€¯á€„á€ºá€•á€«á€á€šá€ºá‹

*   **Web Agent:** á€¡á€„á€ºá€á€¬á€”á€€á€º á€›á€¾á€¬á€–á€½á€±á€–á€­á€¯á€·á€¡á€á€½á€€á€ºá‹
*   **Retriever Agent:** á€¡á€á€­á€•á€Šá€¬ á€¡á€á€¼á€±á€á€¶ (Knowledge Bases) á€á€½á€±á€€á€”á€± á€¡á€á€»á€€á€ºá€¡á€œá€€á€ºá€á€½á€± á€•á€¼á€”á€ºá€šá€°á€–á€­á€¯á€·á€¡á€á€½á€€á€ºá‹
*   **Image Generation Agent:** á€•á€¯á€¶á€›á€­á€•á€ºá€á€½á€± á€–á€”á€ºá€á€®á€¸á€•á€±á€¸á€–á€­á€¯á€·á€¡á€á€½á€€á€ºá‹

á€’á€® Agent á€á€½á€±á€¡á€¬á€¸á€œá€¯á€¶á€¸á€Ÿá€¬ á€œá€¯á€•á€ºá€„á€”á€ºá€¸á€á€½á€²á€á€±á€™á€¾á€¯á€”á€²á€· á€¡á€•á€¼á€”á€ºá€¡á€œá€¾á€”á€º á€†á€€á€ºá€á€½á€šá€ºá€™á€¾á€¯á€€á€­á€¯ á€…á€®á€™á€¶á€á€”á€·á€ºá€á€½á€²á€á€²á€· Orchestrator á€›á€²á€· á€¡á€±á€¬á€€á€ºá€™á€¾á€¬ á€œá€¯á€•á€ºá€†á€±á€¬á€„á€ºá€€á€¼á€•á€«á€á€šá€ºá‹

## Multi-Agent á€¡á€†á€„á€·á€ºá€†á€„á€·á€ºá€–á€¼á€„á€·á€º á€›á€¾á€¯á€•á€ºá€‘á€½á€±á€¸á€á€±á€¬ á€œá€¯á€•á€ºá€„á€”á€ºá€¸á€á€…á€ºá€á€¯á€€á€­á€¯ á€–á€¼á€±á€›á€¾á€„á€ºá€¸á€á€¼á€„á€ºá€¸

> [!TIP]
> á€á€„á€ºá€Ÿá€¬ Google Colab á€€á€­á€¯ á€¡á€á€¯á€¶á€¸á€•á€¼á€¯á€•á€¼á€®á€¸ [á€’á€® Notebook](https://huggingface.co/agents-course/notebooks/blob/main/unit2/smolagents/multiagent_notebook.ipynb) á€‘á€²á€€ Code á€á€½á€±á€€á€­á€¯ á€œá€­á€¯á€€á€ºá€œá€¶á€œá€±á€·á€œá€¬á€”á€­á€¯á€„á€ºá€•á€«á€á€šá€ºá‹

á€§á€Šá€·á€ºá€á€¶á€•á€½á€²á€€ á€”á€®á€¸á€œá€¬á€•á€«á€•á€¼á€®! á€á€„á€·á€ºá€›á€²á€· á€¡á€€á€°á€¡á€Šá€®á€”á€²á€· Alfred á€Ÿá€¬ á€•á€¼á€„á€ºá€†á€„á€ºá€™á€¾á€¯á€á€½á€± á€•á€¼á€®á€¸á€á€«á€”á€®á€¸á€•á€«á€•á€¼á€®á‹

á€’á€«á€•á€±á€™á€šá€·á€º á€¡á€á€¯ á€•á€¼á€¿á€”á€¬á€á€…á€ºá€á€¯ á€›á€¾á€­á€œá€¬á€•á€«á€•á€¼á€®- Batmobile á€•á€»á€±á€¬á€€á€ºá€á€½á€¬á€¸á€•á€«á€•á€¼á€®á‹ Alfred á€Ÿá€¬ á€¡á€…á€¬á€¸á€‘á€­á€¯á€¸á€€á€¬á€¸á€á€…á€ºá€…á€®á€¸á€€á€­á€¯ á€¡á€™á€¼á€”á€ºá€†á€¯á€¶á€¸ á€›á€¾á€¬á€–á€½á€±á€–á€­á€¯á€· á€œá€­á€¯á€¡á€•á€ºá€”á€±á€•á€«á€á€šá€ºá‹

á€€á€¶á€€á€±á€¬á€„á€ºá€¸á€…á€½á€¬á€”á€²á€·á€•á€² Bruce Wayne á€›á€²á€· á€˜á€á€‡á€¬á€á€ºá€€á€¼á€±á€¬á€„á€ºá€¸á€›á€¯á€•á€ºá€›á€¾á€„á€ºá€á€½á€± á€¡á€”á€Šá€ºá€¸á€„á€šá€º á€›á€­á€¯á€€á€ºá€€á€°á€¸á€á€²á€·á€–á€°á€¸á€á€¬á€€á€¼á€±á€¬á€„á€·á€ºáŠ Alfred á€Ÿá€¬ á€›á€¯á€•á€ºá€›á€¾á€„á€ºá€›á€­á€¯á€€á€ºá€€á€½á€„á€ºá€¸á€á€½á€±á€™á€¾á€¬ á€€á€»á€”á€ºá€á€²á€·á€á€²á€· á€€á€¬á€¸á€á€…á€ºá€…á€®á€¸á€€á€­á€¯ á€›á€šá€°á€•á€¼á€®á€¸ á€á€±á€á€ºá€™á€®á€á€²á€· á€…á€¶á€”á€¾á€¯á€”á€ºá€¸á€á€½á€±á€”á€²á€· á€•á€¼á€”á€ºá€œá€Šá€ºá€•á€¼á€¯á€•á€¼á€„á€ºá€”á€­á€¯á€„á€ºá€•á€«á€á€šá€ºá‹ á€’á€®á€•á€¼á€¯á€•á€¼á€„á€ºá€™á€¾á€¯á€™á€¾á€¬ Full Self-Driving (á€¡á€•á€¼á€Šá€·á€ºá€¡á€ á€€á€­á€¯á€šá€ºá€á€­á€¯á€„á€ºá€™á€±á€¬á€„á€ºá€¸á€”á€¾á€„á€ºá€”á€­á€¯á€„á€ºá€á€±á€¬) á€…á€”á€…á€ºá€€á€­á€¯ á€‘á€Šá€·á€ºá€á€½á€„á€ºá€¸á€–á€­á€¯á€·á€œá€Šá€ºá€¸ á€á€±á€á€»á€¬á€•á€±á€«á€€á€º á€•á€«á€á€„á€ºá€•á€«á€œá€­á€™á€·á€ºá€™á€šá€ºá‹

á€’á€«á€•á€±á€™á€šá€·á€º á€’á€®á€›á€­á€¯á€€á€ºá€€á€°á€¸á€›á€±á€¸ á€”á€±á€›á€¬á€á€½á€±á€Ÿá€¬ á€€á€™á€¹á€˜á€¬á€á€…á€ºá€á€”á€ºá€¸á€™á€¾á€¬ á€›á€¾á€­á€”á€­á€¯á€„á€ºá€•á€¼á€®á€¸ á€¡á€›á€±á€¡á€á€½á€€á€ºá€œá€Šá€ºá€¸ á€™á€»á€¬á€¸á€•á€¼á€¬á€¸á€”á€­á€¯á€„á€ºá€•á€«á€á€šá€ºá‹

á€’á€«á€€á€¼á€±á€¬á€„á€·á€º Alfred á€€ á€á€„á€·á€ºá€›á€²á€· á€¡á€€á€°á€¡á€Šá€®á€€á€­á€¯ á€œá€­á€¯á€¡á€•á€ºá€”á€±á€•á€«á€á€šá€ºá‹ á€’á€®á€œá€¯á€•á€ºá€„á€”á€ºá€¸á€€á€­á€¯ á€–á€¼á€±á€›á€¾á€„á€ºá€¸á€”á€­á€¯á€„á€ºá€™á€šá€·á€º Agent á€á€…á€ºá€á€¯á€€á€­á€¯ á€á€„á€ºá€á€Šá€ºá€†á€±á€¬á€€á€ºá€•á€±á€¸á€”á€­á€¯á€„á€ºá€™á€œá€¬á€¸?

> ğŸ‘‰ á€€á€™á€¹á€˜á€¬á€•á€±á€«á€ºá€›á€¾á€­ Batman á€›á€¯á€•á€ºá€›á€¾á€„á€ºá€›á€­á€¯á€€á€ºá€€á€°á€¸á€›á€±á€¸ á€”á€±á€›á€¬á€¡á€¬á€¸á€œá€¯á€¶á€¸á€€á€­á€¯ á€›á€¾á€¬á€–á€½á€±á€•á€«áŠ á€‘á€­á€¯á€”á€±á€›á€¬á€™á€»á€¬á€¸á€á€­á€¯á€· á€€á€¯á€”á€ºá€á€„á€ºá€œá€±á€šá€¬á€‰á€ºá€–á€¼á€„á€·á€º á€á€½á€¬á€¸á€›á€±á€¬á€€á€ºá€™á€Šá€·á€º á€¡á€á€»á€­á€”á€ºá€€á€­á€¯ á€á€½á€€á€ºá€á€»á€€á€ºá€•á€« (á€€á€»á€½á€”á€ºá€á€±á€¬á€ºá€á€­á€¯á€·á€€ Gotham á€™á€¾á€¬ á€›á€¾á€­á€•á€«á€á€šá€ºáŠ 40.7128Â° N, 74.0060Â° W)áŠ á€•á€¼á€®á€¸á€”á€±á€¬á€€á€º á€™á€¼á€±á€•á€¯á€¶á€•á€±á€«á€ºá€á€½á€„á€º á€–á€±á€¬á€ºá€•á€¼á€•á€«á‹ á€™á€¼á€±á€•á€¯á€¶á€•á€±á€«á€ºá€›á€¾á€­ á€¡á€™á€¾á€á€ºá€™á€»á€¬á€¸á á€¡á€›á€±á€¬á€„á€ºá€á€Šá€º á€€á€¯á€”á€ºá€á€„á€ºá€œá€±á€šá€¬á€‰á€ºá€–á€¼á€„á€·á€º á€á€½á€¬á€¸á€›á€™á€Šá€·á€º á€¡á€á€»á€­á€”á€ºá€•á€±á€«á€º á€™á€°á€á€Šá€ºá á€€á€½á€²á€•á€¼á€¬á€¸á€›á€•á€«á€™á€šá€ºá‹ á€‘á€­á€¯á€·á€¡á€•á€¼á€„á€ºáŠ á€¡á€œá€¬á€¸á€á€° á€€á€¯á€”á€ºá€á€„á€ºá€œá€±á€šá€¬á€‰á€º á€á€½á€¬á€¸á€œá€¬á€á€»á€­á€”á€ºá€›á€¾á€­á€á€±á€¬ Supercar á€…á€€á€ºá€›á€¯á€¶á€¡á€á€»á€­á€¯á€·á€€á€­á€¯á€œá€Šá€ºá€¸ á€™á€¼á€±á€•á€¯á€¶á€•á€±á€«á€ºá€á€½á€„á€º á€–á€±á€¬á€ºá€•á€¼á€•á€«á‹

á€’á€«á€€á€­á€¯ á€…á€á€„á€ºá€á€Šá€ºá€†á€±á€¬á€€á€ºá€€á€¼á€•á€«á€…á€­á€¯á€·!

á€’á€®á€¥á€•á€™á€¬á€¡á€á€½á€€á€º á€”á€±á€¬á€€á€ºá€‘á€•á€º Packages á€¡á€á€»á€­á€¯á€· á€œá€­á€¯á€¡á€•á€ºá€á€¬á€€á€¼á€±á€¬á€„á€·á€ºáŠ á€¡á€›á€„á€ºá€†á€¯á€¶á€¸ Install á€œá€¯á€•á€ºá€›á€•á€«á€™á€šá€ºá‹

```bash
pip install 'smolagents[litellm]' plotly geopandas shapely kaleido -q
```

### á€•á€‘á€™á€†á€¯á€¶á€¸á€¡á€”á€±á€”á€²á€· á€€á€¯á€”á€ºá€á€„á€ºá€œá€±á€šá€¬á€‰á€º á€á€½á€¬á€¸á€œá€¬á€á€»á€­á€”á€ºá€€á€­á€¯ á€á€½á€€á€ºá€á€»á€€á€ºá€–á€­á€¯á€· Tool á€á€…á€ºá€á€¯ á€–á€”á€ºá€á€®á€¸á€•á€«á€™á€šá€ºá‹

```python
import math
from typing import Optional, Tuple

from smolagents import tool


@tool
def calculate_cargo_travel_time(
    origin_coords: Tuple[float, float],
    destination_coords: Tuple[float, float],
    cruising_speed_kmh: Optional[float] = 750.0,  # Average speed for cargo planes
) -> float:
    """
    á€€á€™á€¹á€˜á€¬á€•á€±á€«á€ºá€›á€¾á€­ á€”á€±á€›á€¬á€”á€¾á€…á€ºá€á€¯á€€á€¼á€¬á€¸ á€€á€¯á€”á€ºá€á€„á€ºá€œá€±á€šá€¬á€‰á€º á€á€½á€¬á€¸á€œá€¬á€á€»á€­á€”á€ºá€€á€­á€¯ Great-circle distance á€€á€­á€¯ á€¡á€á€¯á€¶á€¸á€•á€¼á€¯á á€á€½á€€á€ºá€á€»á€€á€ºá€•á€«á‹

    Args:
        origin_coords: á€…á€á€„á€ºá€›á€¬á€”á€±á€›á€¬á (Latitude, Longitude) Tuple
        destination_coords: á€¦á€¸á€á€Šá€ºá€›á€¬á€”á€±á€›á€¬á (Latitude, Longitude) Tuple
        cruising_speed_kmh: Optional á€¡á€•á€»á€¶á€”á€¾á€¯á€”á€ºá€¸ (km/h á€–á€¼á€„á€·á€º) (á€•á€¯á€¶á€™á€¾á€”á€º á€€á€¯á€”á€ºá€á€„á€ºá€œá€±á€šá€¬á€‰á€ºá€™á€»á€¬á€¸á€¡á€á€½á€€á€º 750 km/h)

    Returns:
        float: á€á€”á€·á€ºá€™á€¾á€”á€ºá€¸á€á€¼á€± á€á€½á€¬á€¸á€œá€¬á€á€»á€­á€”á€º (á€”á€¬á€›á€®á€–á€¼á€„á€·á€º)

    Example:
        >>> # Chicago (41.8781Â° N, 87.6298Â° W) á€™á€¾ Sydney (33.8688Â° S, 151.2093Â° E) á€á€­á€¯á€·
        >>> result = calculate_cargo_travel_time((41.8781, -87.6298), (-33.8688, 151.2093))
    """

    def to_radians(degrees: float) -> float:
        return degrees * (math.pi / 180)

    # Coordinates á€™á€»á€¬á€¸á€€á€­á€¯ á€‘á€¯á€á€ºá€šá€°á€á€¼á€„á€ºá€¸
    lat1, lon1 = map(to_radians, origin_coords)
    lat2, lon2 = map(to_radians, destination_coords)

    # á€€á€™á€¹á€˜á€¬á€™á€¼á€±á á€¡á€á€»á€„á€ºá€¸á€á€€á€º (á€€á€®á€œá€­á€¯á€™á€®á€á€¬á€–á€¼á€„á€·á€º)
    EARTH_RADIUS_KM = 6371.0

    # Haversine á€–á€±á€¬á€ºá€™á€¼á€°á€œá€¬á€€á€­á€¯ á€¡á€á€¯á€¶á€¸á€•á€¼á€¯á Great-circle distance á€€á€­á€¯ á€á€½á€€á€ºá€á€»á€€á€ºá€á€¼á€„á€ºá€¸
    dlon = lon2 - lon1
    dlat = lat2 - lat1

    a = (
        math.sin(dlat / 2) ** 2
        + math.cos(lat1) * math.cos(lat2) * math.sin(dlon / 2) ** 2
    )
    c = 2 * math.asin(math.sqrt(a))
    distance = EARTH_RADIUS_KM * c

    # á€á€­á€¯á€€á€ºá€›á€­á€¯á€€á€ºá€™á€Ÿá€¯á€á€ºá€á€±á€¬ á€œá€™á€ºá€¸á€€á€¼á€±á€¬á€„á€ºá€¸á€™á€»á€¬á€¸á€”á€¾á€„á€·á€º á€œá€±á€€á€¼á€±á€¬á€„á€ºá€¸á€‘á€­á€”á€ºá€¸á€á€»á€¯á€•á€ºá€™á€¾á€¯á€™á€»á€¬á€¸á€¡á€á€½á€€á€º áá€% á€‘á€•á€ºá€•á€±á€«á€„á€ºá€¸á€á€¼á€„á€ºá€¸
    actual_distance = distance * 1.1

    # á€œá€±á€šá€¬á€‰á€ºá€•á€»á€¶á€á€”á€ºá€¸á€á€»á€­á€”á€º á€á€½á€€á€ºá€á€»á€€á€ºá€á€¼á€„á€ºá€¸
    # á€œá€±á€šá€¬á€‰á€ºá€á€€á€ºá€á€¼á€„á€ºá€¸á€”á€¾á€„á€·á€º á€†á€„á€ºá€¸á€á€€á€ºá€á€¼á€„á€ºá€¸ á€œá€¯á€•á€ºá€„á€”á€ºá€¸á€…á€‰á€ºá€™á€»á€¬á€¸á€¡á€á€½á€€á€º á á€”á€¬á€›á€® á€‘á€•á€ºá€•á€±á€«á€„á€ºá€¸á€á€¼á€„á€ºá€¸
    flight_time = (actual_distance / cruising_speed_kmh) + 1.0

    # á€›á€œá€’á€ºá€€á€­á€¯ á€’á€á€™á€”á€¾á€…á€ºá€”á€±á€›á€¬á€–á€¼á€„á€·á€º á€•á€¯á€¶á€…á€¶á€á€»á€á€¼á€„á€ºá€¸
    return round(flight_time, 2)


print(calculate_cargo_travel_time((41.8781, -87.6298), (-33.8688, 151.2093)))
```

### Agent á€€á€­á€¯ á€…á€”á€…á€ºá€á€€á€» á€á€Šá€ºá€†á€±á€¬á€€á€ºá€á€¼á€„á€ºá€¸

Model Provider á€¡á€á€½á€€á€º Hugging Face Hub á€•á€±á€«á€ºá€›á€¾á€­ [Inference Providers](https://huggingface.co/blog/inference-providers) á€¡á€á€…á€ºá€™á€»á€¬á€¸á€‘á€²á€™á€¾ Together AI á€€á€­á€¯ á€¡á€á€¯á€¶á€¸á€•á€¼á€¯á€•á€«á€™á€šá€ºá‹

GoogleSearchTool á€á€Šá€º á€á€€á€ºá€˜á€ºá€›á€¾á€¬á€–á€½á€±á€›á€”á€º [Serper API](https://serper.dev) á€€á€­á€¯ á€¡á€á€¯á€¶á€¸á€•á€¼á€¯á€•á€«á€á€šá€ºá‹ á€’á€«á€€á€¼á€±á€¬á€„á€·á€º `SERPAPI_API_KEY` á€€á€­á€¯ Environment Variable á€¡á€–á€¼á€…á€º á€á€á€ºá€™á€¾á€á€ºá€•á€¼á€®á€¸ `provider="serpapi"` á€€á€­á€¯ á€•á€±á€¸á€•á€­á€¯á€·á€›á€•á€«á€™á€šá€ºáŠ á€á€­á€¯á€·á€™á€Ÿá€¯á€á€º `SERPER_API_KEY` á€€á€­á€¯ á€á€á€ºá€™á€¾á€á€ºá€•á€¼á€®á€¸ `provider=serper` á€€á€­á€¯ á€•á€±á€¸á€•á€­á€¯á€·á€›á€•á€«á€™á€šá€ºá‹

á€á€„á€·á€ºá€™á€¾á€¬ Serp API Provider á€™á€›á€¾á€­á€˜á€°á€¸á€†á€­á€¯á€›á€„á€º `DuckDuckGoSearchTool` á€€á€­á€¯ á€¡á€á€¯á€¶á€¸á€•á€¼á€¯á€”á€­á€¯á€„á€ºá€•á€«á€á€šá€ºáŠ á€’á€«á€•á€±á€™á€šá€·á€º áá€„á€ºá€¸á€™á€¾á€¬ Rate Limit (á€¡á€á€¯á€¶á€¸á€•á€¼á€¯á€™á€¾á€¯ á€€á€”á€·á€ºá€á€á€ºá€á€»á€€á€º) á€›á€¾á€­á€á€šá€ºá€†á€­á€¯á€á€¬ á€á€á€­á€•á€¼á€¯á€•á€«á‹

```python
import os
from PIL import Image
from smolagents import CodeAgent, GoogleSearchTool, InferenceClientModel, VisitWebpageTool

model = InferenceClientModel(model_id="Qwen/Qwen2.5-Coder-32B-Instruct", provider="together")
```

á€›á€­á€¯á€¸á€›á€¾á€„á€ºá€¸á€á€²á€· Report á€á€…á€ºá€á€¯ á€•á€±á€¸á€”á€­á€¯á€„á€ºá€–á€­á€¯á€·á€¡á€á€½á€€á€º á€¡á€á€¼á€±á€á€¶ Agent á€á€…á€ºá€á€¯á€€á€­á€¯ á€…á€á€„á€ºá€–á€”á€ºá€á€®á€¸á€”á€­á€¯á€„á€ºá€•á€«á€á€šá€ºá‹

```python
task = """Find all Batman filming locations in the world, calculate the time to transfer via cargo plane to here (we're in Gotham, 40.7128Â° N, 74.0060Â° W), and return them to me as a pandas dataframe.
Also give me some supercar factories with the same cargo plane transfer time."""
```

```python
agent = CodeAgent(
    model=model,
    tools=[GoogleSearchTool("serper"), VisitWebpageTool(), calculate_cargo_travel_time],
    additional_authorized_imports=["pandas"],
    max_steps=20,
)
```

```python
result = agent.run(task)
```

```python
result
```

á€€á€»á€½á€”á€ºá€á€±á€¬á€ºá€á€­á€¯á€·á€›á€²á€· á€…á€™á€ºá€¸á€á€•á€ºá€™á€¾á€¯á€™á€¾á€¬á€á€±á€¬á€· á€’á€®á€œá€­á€¯ á€›á€œá€’á€º á€‘á€½á€€á€ºá€œá€¬á€•á€«á€á€šá€ºá‹

```python
|  | Location                                             | Travel Time to Gotham (hours) |
|--|------------------------------------------------------|------------------------------|
| 0  | Necropolis Cemetery, Glasgow, Scotland, UK         | 8.60                         |
| 1  | St. George's Hall, Liverpool, England, UK         | 8.81                         |
| 2  | Two Temple Place, London, England, UK             | 9.17                         |
| 3  | Wollaton Hall, Nottingham, England, UK           | 9.00                         |
| 4  | Knebworth House, Knebworth, Hertfordshire, UK    | 9.15                         |
| 5  | Acton Lane Power Station, Acton Lane, Acton, UK  | 9.16                         |
| 6  | Queensboro Bridge, New York City, USA            | 1.01                         |
| 7  | Wall Street, New York City, USA                  | 1.00                         |
| 8  | Mehrangarh Fort, Jodhpur, Rajasthan, India       | 18.34                        |
| 9  | Turda Gorge, Turda, Romania                      | 11.89                        |
| 10 | Chicago, USA                                     | 2.68                         |
| 11 | Hong Kong, China                                 | 19.99                        |
| 12 | Cardington Studios, Northamptonshire, UK        | 9.10                         |
| 13 | Warner Bros. Leavesden Studios, Hertfordshire, UK | 9.13                         |
| 14 | Westwood, Los Angeles, CA, USA                  | 6.79                         |
| 15 | Woking, UK (McLaren)                             | 9.13                         |
```

á€’á€®á€›á€œá€’á€ºá€€á€­á€¯ á€•á€­á€¯á€™á€­á€¯á€€á€±á€¬á€„á€ºá€¸á€™á€½á€”á€ºá€¡á€±á€¬á€„á€º á€œá€¯á€•á€ºá€†á€±á€¬á€„á€ºá€”á€­á€¯á€„á€ºá€–á€­á€¯á€·á€¡á€á€½á€€á€º á€á€®á€¸á€á€¼á€¬á€¸ á€…á€®á€™á€¶á€€á€­á€”á€ºá€¸á€†á€½á€²á€á€¼á€„á€ºá€¸ á€¡á€†á€„á€·á€ºá€á€½á€±á€€á€­á€¯ á€‘á€Šá€·á€ºá€á€½á€„á€ºá€¸á€•á€¼á€®á€¸ Prompt á€á€½á€±á€€á€­á€¯ á€•á€­á€¯á€™á€­á€¯á€¡á€á€±á€¸á€…á€­á€á€º á€•á€±á€¸á€”á€­á€¯á€„á€ºá€•á€«á€á€šá€ºá‹

á€…á€®á€™á€¶á€€á€­á€”á€ºá€¸á€†á€½á€²á€á€¼á€„á€ºá€¸ á€¡á€†á€„á€·á€ºá€á€½á€±á€€ Agent á€€á€­á€¯ á€›á€¾á€±á€·á€€á€­á€¯ á€á€½á€±á€¸á€á€±á€«á€ºá€•á€¼á€®á€¸ á€”á€±á€¬á€€á€ºá€‘á€•á€º á€œá€¯á€•á€ºá€†á€±á€¬á€„á€ºá€›á€™á€šá€·á€º á€¡á€†á€„á€·á€ºá€á€½á€±á€€á€­á€¯ á€€á€¼á€­á€¯á€á€„á€ºá€…á€®á€…á€‰á€ºá€”á€­á€¯á€„á€ºá€…á€±á€•á€«á€á€šá€ºá‹ á€’á€«á€€ á€›á€¾á€¯á€•á€ºá€‘á€½á€±á€¸á€á€²á€· Tasks á€á€½á€±á€¡á€á€½á€€á€º á€¡á€á€¯á€¶á€¸á€á€„á€ºá€•á€«á€á€šá€ºá‹

```python
agent.planning_interval = 4

detailed_report = agent.run(f"""
You're an expert analyst. You make comprehensive reports after visiting many websites.
Don't hesitate to search for many queries at once in a for loop.
For each data point that you find, visit the source url to confirm numbers.

{task}
""")

print(detailed_report)
```

```python
detailed_report
```

á€€á€»á€½á€”á€ºá€á€±á€¬á€ºá€á€­á€¯á€·á€›á€²á€· á€…á€™á€ºá€¸á€á€•á€ºá€™á€¾á€¯á€™á€¾á€¬á€á€±á€¬á€· á€’á€®á€œá€­á€¯ á€•á€­á€¯á€™á€­á€¯á€€á€»á€…á€ºá€œá€»á€…á€ºá€á€²á€· á€›á€œá€’á€º á€‘á€½á€€á€ºá€œá€¬á€•á€«á€á€šá€ºá‹

```python
|  | Location                                         | Travel Time (hours) |
|--|--------------------------------------------------|---------------------|
| 0  | Bridge of Sighs, Glasgow Necropolis, Glasgow, UK | 8.6                 |
| 1  | Wishart Street, Glasgow, Scotland, UK         | 8.6                 |
```

á€’á€®á€œá€­á€¯ á€œá€»á€„á€ºá€™á€¼á€”á€ºá€á€²á€· á€•á€¼á€±á€¬á€„á€ºá€¸á€œá€²á€™á€¾á€¯á€á€½á€±á€€á€¼á€±á€¬á€„á€·á€ºáŠ á€€á€»á€½á€”á€ºá€á€±á€¬á€ºá€á€­á€¯á€·á€›á€²á€· Agent á€€á€­á€¯ á€¡á€á€±á€¸á€…á€­á€á€º Prompt á€•á€±á€¸á€á€¼á€„á€ºá€¸á€”á€²á€· á€…á€®á€™á€¶á€€á€­á€”á€ºá€¸á€†á€½á€²á€”á€­á€¯á€„á€ºá€…á€½á€™á€ºá€¸ á€•á€±á€¸á€á€¼á€„á€ºá€¸á€¡á€¬á€¸á€–á€¼á€„á€·á€º á€•á€­á€¯á€™á€­á€¯á€€á€»á€…á€ºá€œá€»á€…á€ºá€á€²á€· Report á€á€…á€ºá€á€¯á€€á€­á€¯ á€›á€›á€¾á€­á€á€²á€·á€•á€«á€á€šá€ºá‹

Model á€›á€²á€· Context Window á€Ÿá€¬ á€œá€»á€„á€ºá€™á€¼á€”á€ºá€…á€½á€¬ á€•á€¼á€Šá€·á€ºá€œá€¬á€”á€­á€¯á€„á€ºá€•á€«á€á€šá€ºá‹ á€’á€«á€€á€¼á€±á€¬á€„á€·á€º **á€€á€»á€½á€”á€ºá€á€±á€¬á€ºá€á€­á€¯á€·á€›á€²á€· Agent á€€á€­á€¯ á€¡á€á€±á€¸á€…á€­á€á€º á€›á€¾á€¬á€–á€½á€±á€™á€¾á€¯ á€›á€œá€’á€ºá€á€½á€±á€€á€­á€¯ á€¡á€á€¼á€¬á€¸ á€›á€œá€’á€ºá€á€…á€ºá€á€¯á€”á€²á€· á€•á€±á€«á€„á€ºá€¸á€…á€•á€ºá€á€­á€¯á€„á€ºá€¸á€™á€šá€ºá€†á€­á€¯á€›á€„á€º á€•á€­á€¯á€™á€­á€¯á€”á€¾á€±á€¸á€€á€½á€±á€¸á€œá€¬á€•á€¼á€®á€¸ Token á€á€½á€±á€”á€²á€· á€€á€¯á€”á€ºá€€á€»á€…á€›á€­á€á€ºá€á€½á€± á€œá€»á€„á€ºá€™á€¼á€”á€ºá€…á€½á€¬ á€™á€¼á€„á€·á€ºá€á€€á€ºá€œá€¬á€•á€«á€œá€­á€™á€·á€ºá€™á€šá€º**á‹

â¡ï¸ á€’á€«á€€á€¼á€±á€¬á€„á€·á€º á€€á€»á€½á€”á€ºá€á€±á€¬á€ºá€á€­á€¯á€·á€›á€²á€· á€…á€”á€…á€ºá€–á€½á€²á€·á€…á€Šá€ºá€¸á€•á€¯á€¶á€€á€­á€¯ á€•á€­á€¯á€™á€­á€¯á€€á€±á€¬á€„á€ºá€¸á€™á€½á€”á€ºá€¡á€±á€¬á€„á€º á€œá€¯á€•á€ºá€†á€±á€¬á€„á€ºá€–á€­á€¯á€· á€œá€­á€¯á€¡á€•á€ºá€•á€«á€á€šá€ºá‹

### âœŒï¸ á€œá€¯á€•á€ºá€„á€”á€ºá€¸á€€á€­á€¯ Agent á€”á€¾á€…á€ºá€á€¯á€€á€¼á€¬á€¸ á€á€½á€²á€á€±á€á€¼á€„á€ºá€¸

Multi-Agent á€–á€½á€²á€·á€…á€Šá€ºá€¸á€•á€¯á€¶á€á€½á€±á€€ á€™á€á€°á€Šá€®á€á€²á€· á€œá€¯á€•á€ºá€„á€”á€ºá€¸á€á€½á€²á€á€½á€±á€€á€¼á€¬á€¸á€™á€¾á€¬ á€™á€¾á€á€ºá€‰á€¬á€á€ºá€á€½á€±á€€á€­á€¯ á€á€½á€²á€á€¼á€¬á€¸á€”á€­á€¯á€„á€ºá€…á€±á€•á€¼á€®á€¸ á€¡á€€á€»á€­á€¯á€¸á€€á€»á€±á€¸á€‡á€°á€¸ á€”á€¾á€…á€ºá€á€¯á€€á€­á€¯ á€•á€±á€¸á€•á€«á€á€šá€ºá‹

*   Agent á€á€…á€ºá€á€¯á€…á€®á€Ÿá€¬ á€á€°á€·á€›á€²á€· á€¡á€“á€­á€€ á€œá€¯á€•á€ºá€„á€”á€ºá€¸á€¡á€•á€±á€«á€º á€•á€­á€¯á€™á€­á€¯á€¡á€¬á€›á€¯á€¶á€…á€­á€¯á€€á€ºá€”á€­á€¯á€„á€ºá€á€¬á€€á€¼á€±á€¬á€„á€·á€º á€…á€½á€™á€ºá€¸á€†á€±á€¬á€„á€ºá€›á€Šá€º á€•á€­á€¯á€€á€±á€¬á€„á€ºá€¸á€œá€¬á€•á€«á€á€šá€ºá‹
*   á€™á€¾á€á€ºá€‰á€¬á€á€ºá€á€½á€±á€€á€­á€¯ á€á€½á€²á€á€¼á€¬á€¸á€‘á€¬á€¸á€á€¼á€„á€ºá€¸á€€ á€¡á€†á€„á€·á€ºá€á€­á€¯á€„á€ºá€¸á€™á€¾á€¬ á€‘á€Šá€·á€ºá€á€½á€„á€ºá€¸á€›á€™á€šá€·á€º Token á€¡á€›á€±á€¡á€á€½á€€á€ºá€€á€­á€¯ á€œá€»á€¾á€±á€¬á€·á€á€»á€•á€±á€¸á€á€¬á€€á€¼á€±á€¬á€„á€·á€º Latency (á€”á€¾á€±á€¬á€„á€·á€ºá€”á€¾á€±á€¸á€™á€¾á€¯) á€”á€²á€· á€€á€¯á€”á€ºá€€á€»á€…á€›á€­á€á€ºá€€á€­á€¯ á€œá€»á€¾á€±á€¬á€·á€á€»á€•á€±á€¸á€•á€«á€á€šá€ºá‹

Manager Agent á€á€…á€ºá€á€¯á€€ á€…á€®á€™á€¶á€á€”á€·á€ºá€á€½á€²á€™á€šá€·á€º á€á€®á€¸á€á€”á€·á€º Web Search Agent á€•á€«á€á€„á€ºá€á€²á€· Team á€á€…á€ºá€á€¯á€€á€­á€¯ á€–á€”á€ºá€á€®á€¸á€€á€¼á€•á€«á€…á€­á€¯á€·á‹

Manager Agent á€Ÿá€¬ á€”á€±á€¬á€€á€ºá€†á€¯á€¶á€¸ Report á€€á€­á€¯ á€›á€±á€¸á€á€¬á€¸á€–á€­á€¯á€·á€¡á€á€½á€€á€º Plotting á€œá€¯á€•á€ºá€”á€­á€¯á€„á€ºá€…á€½á€™á€ºá€¸ á€œá€­á€¯á€¡á€•á€ºá€á€¬á€€á€¼á€±á€¬á€„á€·á€ºáŠ `plotly`áŠ `geopandas` á€”á€²á€· `shapely` á€á€­á€¯á€·á€œá€­á€¯ Imports á€á€½á€±á€€á€­á€¯ á€á€„á€ºá€›á€±á€¬á€€á€ºá€á€½á€„á€·á€º á€•á€±á€¸á€›á€•á€«á€™á€šá€ºá‹

```python
model = InferenceClientModel(
    "Qwen/Qwen2.5-Coder-32B-Instruct", provider="together", max_tokens=8096
)

web_agent = CodeAgent(
    model=model,
    tools=[
        GoogleSearchTool(provider="serper"),
        VisitWebpageTool(),
        calculate_cargo_travel_time,
    ],
    name="web_agent",
    description="Browses the web to find information",
    verbosity_level=0,
    max_steps=10,
)
```

Manager Agent á€€á€á€±á€¬á€· á€…á€­á€á€ºá€•á€­á€¯á€„á€ºá€¸á€†á€­á€¯á€„á€ºá€›á€¬ á€¡á€œá€¯á€•á€ºá€á€½á€±á€€á€­á€¯ á€•á€­á€¯á€™á€­á€¯á€œá€¯á€•á€ºá€†á€±á€¬á€„á€ºá€›á€•á€«á€™á€šá€ºá‹

á€’á€«á€€á€¼á€±á€¬á€„á€·á€º á€€á€»á€½á€”á€ºá€á€±á€¬á€ºá€á€­á€¯á€·á€Ÿá€¬ á€•á€­á€¯á€™á€­á€¯á€¡á€¬á€¸á€€á€±á€¬á€„á€ºá€¸á€á€²á€· Model á€–á€¼á€…á€ºá€á€²á€· [DeepSeek-R1](https://huggingface.co/deepseek-ai/DeepSeek-R1) á€€á€­á€¯ á€•á€±á€¸á€•á€¼á€®á€¸ `planning_interval` á€€á€­á€¯á€•á€« á€‘á€Šá€·á€ºá€á€½á€„á€ºá€¸á€•á€±á€¸á€•á€«á€™á€šá€ºá‹

```python
from smolagents.utils import encode_image_base64, make_image_url
from smolagents import OpenAIServerModel


def check_reasoning_and_plot(final_answer, agent_memory):
    multimodal_model = OpenAIServerModel("gpt-4o", max_tokens=8096)
    filepath = "saved_map.png"
    assert os.path.exists(filepath), "Make sure to save the plot under saved_map.png!"
    image = Image.open(filepath)
    prompt = (
        f"Here is a user-given task and the agent steps: {agent_memory.get_succinct_steps()}. Now here is the plot that was made."
        "Please check that the reasoning process and plot are correct: do they correctly answer the given task?"
        "First list reasons why yes/no, then write your final decision: PASS in caps lock if it is satisfactory, FAIL if it is not."
        "Don't be harsh: if the plot mostly solves the task, it should pass."
        "To pass, a plot should be made using px.scatter_map and not any other method (scatter_map looks nicer)."
    )
    messages = [
        {
            "role": "user",
            "content": [
                {
                    "type": "text",
                    "text": prompt,
                },
                {
                    "type": "image_url",
                    "image_url": {"url": make_image_url(encode_image_base64(image))},
                },
            ],
        }
    ]
    output = multimodal_model(messages).content
    print("Feedback: ", output)
    if "FAIL" in output:
        raise Exception(output)
    return True


manager_agent = CodeAgent(
    model=InferenceClientModel("deepseek-ai/DeepSeek-R1", provider="together", max_tokens=8096),
    tools=[calculate_cargo_travel_time],
    managed_agents=[web_agent],
    additional_authorized_imports=[
        "geopandas",
        "plotly",
        "shapely",
        "json",
        "pandas",
        "numpy",
    ],
    planning_interval=5,
    verbosity_level=2,
    final_answer_checks=[check_reasoning_and_plot],
    max_steps=15,
)
```

á€’á€® Team á€›á€²á€· á€–á€½á€²á€·á€…á€Šá€ºá€¸á€•á€¯á€¶á€€á€­á€¯ á€€á€¼á€Šá€·á€ºá€€á€¼á€•á€«á€…á€­á€¯á€·á‹

```python
manager_agent.visualize()
```

á€’á€«á€€ Agent á€á€½á€±á€”á€²á€· Tools á€á€½á€±á€€á€¼á€¬á€¸á€€ á€–á€½á€²á€·á€…á€Šá€ºá€¸á€•á€¯á€¶á€”á€²á€· á€†á€€á€ºá€”á€½á€¾á€šá€ºá€™á€¾á€¯á€€á€­á€¯ á€”á€¬á€¸á€œá€Šá€ºá€…á€±á€–á€­á€¯á€· á€¡á€±á€¬á€€á€ºá€•á€«á€•á€¯á€¶á€…á€¶á€™á€»á€­á€¯á€¸á€€á€­á€¯ á€‘á€¯á€á€ºá€•á€±á€¸á€•á€«á€œá€­á€™á€·á€ºá€™á€šá€ºá‹

```python
CodeAgent | deepseek-ai/DeepSeek-R1
â”œâ”€â”€ âœ… Authorized imports: ['geopandas', 'plotly', 'shapely', 'json', 'pandas', 'numpy']
â”œâ”€â”€ ğŸ› ï¸ Tools:
â”‚   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”‚   â”ƒ Name                        â”ƒ Description                           â”ƒ Arguments                             â”ƒ
â”‚   â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”©
â”‚   â”‚ calculate_cargo_travel_time â”‚ Calculate the travel time for a cargo â”‚ origin_coords (`array`): Tuple of     â”‚
â”‚   â”‚                             â”‚ plane between two points on Earth     â”‚ (latitude, longitude) for the         â”‚
â”‚   â”‚                             â”‚ using great-circle distance.          â”‚ starting point                        â”‚
â”‚   â”‚                             â”‚                                       â”‚ destination_coords (`array`): Tuple   â”‚
â”‚   â”‚                             â”‚                                       â”‚ of (latitude, longitude) for the      â”‚
â”‚   â”‚                             â”‚                                       â”‚ destination                           â”‚
â”‚   â”‚                             â”‚                                       â”‚ cruising_speed_kmh (`number`):        â”‚
â”‚   â”‚                             â”‚                                       â”‚ Optional cruising speed in km/h       â”‚
â”‚   â”‚                             â”‚                                       â”‚ (defaults to 750 km/h for typical     â”‚
â”‚   â”‚                             â”‚                                       â”‚ cargo planes)                         â”‚
â”‚   â”‚ final_answer                â”‚ Provides a final answer to the given  â”‚ answer (`any`): The final answer to   â”‚
â”‚   â”‚                             â”‚ problem.                              â”‚ the problem                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€ ğŸ¤– Managed agents:
    â””â”€â”€ web_agent | CodeAgent | Qwen/Qwen2.5-Coder-32B-Instruct
        â”œâ”€â”€ âœ… Authorized imports: []
        â”œâ”€â”€ ğŸ“ Description: Browses the web to find information
        â””â”€â”€ ğŸ› ï¸ Tools:
            â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
            â”ƒ Name                        â”ƒ Description                       â”ƒ Arguments                         â”ƒ
            â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”©
            â”‚ web_search                  â”‚ Performs a google web search for  â”‚ query (`string`): The search      â”‚
            â”‚                             â”‚ your query then returns a string  â”‚ query to perform.                 â”‚
            â”‚                             â”‚ of the top search results.        â”‚ filter_year (`integer`):          â”‚
            â”‚                             â”‚                                   â”‚ Optionally restrict results to a  â”‚
            â”‚                             â”‚                                   â”‚ certain year                      â”‚
            â”‚ visit_webpage               â”‚ Visits a webpage at the given url â”‚ url (`string`): The url of the    â”‚
            â”‚                             â”‚ and reads its content as a        â”‚ webpage to visit.                 â”‚
            â”‚                             â”‚ markdown string. Use this to      â”‚                                   â”‚
            â”‚                             â”‚ browse webpages.                  â”‚                                   â”‚
            â”‚ calculate_cargo_travel_time â”‚ Calculate the travel time for a   â”‚ origin_coords (`array`): Tuple of â”‚
            â”‚                             â”‚ cargo plane between two points on â”‚ (latitude, longitude) for the     â”‚
            â”‚                             â”‚ Earth using great-circle          â”‚ starting point                    â”‚
            â”‚                             â”‚ distance.                         â”‚ destination_coords (`array`):     â”‚
            â”‚                             â”‚                                   â”‚ Tuple of (latitude, longitude)    â”‚
            â”‚                             â”‚                                   â”‚ for the destination               â”‚
            â”‚                             â”‚                                   â”‚ cruising_speed_kmh (`number`):    â”‚
            â”‚                             â”‚                                   â”‚ Optional cruising speed in km/h   â”‚
            â”‚                             â”‚                                   â”‚ (defaults to 750 km/h for typical â”‚
            â”‚                             â”‚                                   â”‚ cargo planes)                     â”‚
            â”‚ final_answer                â”‚ Provides a final answer to the    â”‚ answer (`any`): The final answer  â”‚
            â”‚                             â”‚ given problem.                    â”‚ to the problem                    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```python
manager_agent.run("""
Find all Batman filming locations in the world, calculate the time to transfer via cargo plane to here (we're in Gotham, 40.7128Â° N, 74.0060Â° W).
Also give me some supercar factories with the same cargo plane transfer time. You need at least 6 points in total.
Represent this as spatial map of the world, with the locations represented as scatter points with a color that depends on the travel time, and save it to saved_map.png!

Here's an example of how to plot and return a map:
import plotly.express as px
df = px.data.carshare()
fig = px.scatter_map(df, lat="centroid_lat", lon="centroid_lon", text="name", color="peak_hour", size=100,
     color_continuous_scale=px.colors.sequential.Magma, size_max=15, zoom=1)
fig.show()
fig.write_image("saved_image.png")
final_answer(fig)

Never try to process strings using code: when you have a string to read, just print it and you'll see it.
""")
```

á€á€„á€·á€ºá€›á€²á€· á€…á€™á€ºá€¸á€á€•á€ºá€™á€¾á€¯á€™á€¾á€¬ á€˜á€šá€ºá€œá€­á€¯á€–á€¼á€…á€ºá€á€½á€¬á€¸á€œá€²á€á€±á€¬á€· á€™á€á€­á€˜á€°á€¸áŠ á€’á€«á€•á€±á€™á€šá€·á€º á€€á€»á€½á€”á€ºá€á€±á€¬á€·á€ºá€›á€²á€· á€…á€™á€ºá€¸á€á€•á€ºá€™á€¾á€¯á€™á€¾á€¬á€á€±á€¬á€· Manager Agent á€Ÿá€¬ á€œá€¯á€•á€ºá€„á€”á€ºá€¸á€á€½á€±á€€á€­á€¯ á€€á€»á€½á€™á€ºá€¸á€€á€»á€„á€ºá€…á€½á€¬ á€á€½á€²á€á€±á€•á€±á€¸á€á€²á€·á€•á€«á€á€šá€ºá‹ á€•á€‘á€™á€†á€¯á€¶á€¸ `1. Batman á€›á€¯á€•á€ºá€›á€¾á€„á€ºá€›á€­á€¯á€€á€ºá€€á€°á€¸á€›á€±á€¸ á€”á€±á€›á€¬á€™á€»á€¬á€¸ á€›á€¾á€¬á€–á€½á€±á€á€¼á€„á€ºá€¸`áŠ á€•á€¼á€®á€¸á€”á€±á€¬á€€á€º `2. Supercar á€…á€€á€ºá€›á€¯á€¶á€™á€»á€¬á€¸ á€›á€¾á€¬á€–á€½á€±á€á€¼á€„á€ºá€¸` á€á€­á€¯á€·á€€á€­á€¯ Web Agent á€€á€­á€¯ á€á€¬á€á€”á€ºá€•á€±á€¸á€á€²á€·á€•á€¼á€®á€¸áŠ á€›á€œá€’á€ºá€…á€¬á€›á€„á€ºá€¸á€™á€»á€¬á€¸á€€á€­á€¯ á€…á€¯á€…á€Šá€ºá€¸á€€á€¬ á€™á€¼á€±á€•á€¯á€¶á€€á€­á€¯ Plot á€œá€¯á€•á€ºá€á€²á€·á€•á€«á€á€šá€ºá‹

Agent á€›á€²á€· State á€€á€”á€± á€á€­á€¯á€€á€ºá€›á€­á€¯á€€á€º á€…á€…á€ºá€†á€±á€¸á€á€¼á€„á€ºá€¸á€–á€¼á€„á€·á€º á€™á€¼á€±á€•á€¯á€¶á€€ á€˜á€šá€ºá€œá€­á€¯á€•á€¯á€¶á€…á€¶á€œá€²á€†á€­á€¯á€á€¬ á€€á€¼á€Šá€·á€ºá€€á€¼á€•á€«á€…á€­á€¯á€·á‹

```python
manager_agent.python_executor.state["fig"]
```

á€’á€«á€€ á€¡á€±á€¬á€€á€ºá€•á€« á€™á€¼á€±á€•á€¯á€¶á€€á€­á€¯ á€‘á€¯á€á€ºá€•á€±á€¸á€•á€«á€œá€­á€™á€·á€ºá€™á€šá€ºá‹

![Multiagent system example output map](https://huggingface.co/datasets/agents-course/course-images/resolve/main/en/unit2/smolagents/output_map.png)

## á€¡á€›á€„á€ºá€¸á€¡á€™á€¼á€…á€ºá€™á€»á€¬á€¸ (Resources)

*   [Multi-Agent Systems](https://huggingface.co/docs/smolagents/main/en/examples/multiagents) â€“ Multi-Agent á€…á€”á€…á€ºá€™á€»á€¬á€¸á á€á€¼á€¯á€¶á€„á€¯á€¶á€á€¯á€¶á€¸á€á€•á€ºá€á€»á€€á€ºá‹
*   [What is Agentic RAG?](https://weaviate.io/blog/what-is-agentic-rag) â€“ Agentic RAG á€€á€­á€¯ á€™á€­á€á€ºá€†á€€á€ºá€á€¼á€„á€ºá€¸á‹
*   [Multi-Agent RAG System ğŸ¤–ğŸ¤ğŸ¤– Recipe](https://huggingface.co/learn/cookbook/multiagent_rag_system) â€“ Multi-Agent RAG á€…á€”á€…á€ºá€á€…á€ºá€á€¯ á€á€Šá€ºá€†á€±á€¬á€€á€ºá€›á€”á€º á€¡á€†á€„á€·á€ºá€†á€„á€·á€º á€œá€™á€ºá€¸á€Šá€½á€¾á€”á€ºá€á€»á€€á€ºá‹