# `LangGraph`란 무엇인가요?

`LangGraph`는 [LangChain](https://www.langchain.com/)에서 개발한 프레임워크로, **LLM을 통합한 어플리케이션의 제어 흐름을 관리**하기 위해 만들어졌습니다.

## `LangGraph`는 `LangChain`과 다른가요?

LangChain은 모델 및 기타 구성 요소와 상호작용하기 위한 표준 인터페이스를 제공하며, 검색, LLM 호출, 툴 호출에 유용합니다.
LangChain의 클래스들은 LangGraph에서 사용될 수 있지만, 반드시 사용해야 하는 것은 아닙니다.

두 패키지는 다르며 독립적으로 사용할 수 있지만, 결국 온라인에서 찾을 수 있는 모든 리소스는 두 패키지를 함께 사용합니다.

## 언제 `LangGraph`를 사용해야 할까요?
### 제어 vs 자유

AI 어플리케이션을 설계할 때, **제어**와 **자유** 사이의 근본적인 트레이드오프에 직면합니다:

- **자유**는 LLM에게 더 많은 창의성과 예상치 못한 문제 해결을 위한 여지를 제공합니다.
- **제어**는 예측 가능한 동작을 보장하고 가드레일을 유지할 수 있게 해줍니다.

*smolagents*에서 볼 수 있는 코드 에이전트들은 매우 자유롭습니다. 단일 액션 단계에서 여러 툴을 호출하고, 자신만의 툴을 만들 수 있습니다. 하지만 이런 동작은 JSON으로 작업하는 일반적인 에이전트보다 예측하기 어렵고 제어하기 어렵게 만듭니다!

`LangGraph`는 스펙트럼의 반대편에 있으며, 에이전트 실행에 **"제어"**가 필요할 때 빛납니다.

LangGraph는 특히 **어플리케이션에 대한 제어**가 필요할 때 가치가 있습니다. 예측 가능한 프로세스를 따르면서도 LLM의 힘을 활용하는 어플리케이션을 구축할 수 있는 도구를 제공합니다.

간단히 말해서, 어플리케이션이 특정 방식으로 오케스트레이션되어야 하는 일련의 단계를 포함하고, 각 분기점에서 결정이 내려져야 한다면, **LangGraph가 필요한 구조를 제공합니다**.

예를 들어, 일부 문서에 대한 질문에 답할 수 있는 LLM 어시스턴트를 구축하고 싶다고 가정해봅시다.

LLM이 텍스트를 가장 잘 이해하기 때문에, 질문에 답하기 전에 다른 복잡한 모달리티(차트, 표)를 텍스트로 변환해야 합니다. 하지만 그 선택은 가지고 있는 문서의 유형에 따라 달라집니다!

이것은 제가 다음과 같이 표현하기로 선택한 분기입니다:

<img src="https://huggingface.co/datasets/agents-course/course-images/resolve/main/en/unit2/LangGraph/flow.png" alt="Control flow"/>

> 💡 **팁:** 왼쪽 부분은 에이전트가 아닙니다. 여기서는 툴 호출이 포함되지 않기 때문입니다. 하지만 오른쪽 부분은 xls를 쿼리하기 위해 코드를 작성해야 합니다(pandas로 변환하고 조작).

이 분기는 결정적이지만, LLM 출력에 따라 조건이 정해지는 비결정적 분기도 설계할 수 있습니다.

LangGraph가 뛰어난 주요 시나리오는 다음과 같습니다:

- **명시적인 흐름 제어가 필요한 다단계 추론 프로세스**
- **단계 간 상태 지속이 필요한 어플리케이션**
- **결정적 로직과 AI 기능을 결합하는 시스템**
- **사람 개입이 필요한 워크플로우**
- **여러 구성 요소가 함께 작동하는 복잡한 에이전트 아키텍처**

본질적으로, 가능할 때마다 **사람으로서** 각 액션의 출력을 기반으로 액션 흐름을 설계하고, 그에 따라 다음에 실행할 것을 결정하세요. 이 경우 LangGraph가 올바른 프레임워크입니다!

`LangGraph`는 제 생각에 시장에서 가장 프로덕션 준비가 잘 된 에이전트 프레임워크입니다.

## LangGraph는 어떻게 작동하나요?

핵심적으로 `LangGraph`는 어플리케이션의 흐름을 정의하기 위해 방향성 그래프 구조를 사용합니다:

- **노드**는 개별 처리 단계를 나타냅니다(LLM 호출, 툴 사용, 결정 내리기 등).
- **엣지**는 단계 간 가능한 전환을 정의합니다.
- **상태**는 사용자가 정의하고 유지하며 실행 중 노드 간에 전달됩니다. 다음에 어떤 노드를 대상으로 할지 결정할 때, 우리가 살펴보는 것은 현재 상태입니다.

이러한 기본 구성 요소들을 다음 장에서 더 자세히 탐구해보겠습니다!

## 일반 파이썬과 어떻게 다른가요? 왜 LangGraph가 필요한가요?

"이 모든 흐름을 처리하기 위해 if-else 문이 있는 일반 파이썬 코드를 작성할 수 있지 않나요?"라고 궁금해할 수 있습니다.

기술적으로는 맞지만, LangGraph는 복잡한 시스템 구축을 위해 일반 파이썬보다 **일부 장점**을 제공합니다. LangGraph 없이도 같은 어플리케이션을 구축할 수 있지만, 더 쉬운 도구와 추상화를 제공합니다.

상태, 시각화, 로깅(트레이스), 내장된 사람 개입 등을 포함합니다.
